<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduGameHub</title>
    <link rel="stylesheet" href="home.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <meta name="theme-color" content="#4A90E2">
    <link rel="manifest" href="/manifest.json">

</head>

<body>
    <div class="main">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg ">
            <div class="container-fluid">
                <a class="navbar-brand fw-bold" href="#">üéì EduGameHub</a>
                <!-- Hamburger Button -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Navbar Links -->
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="leaderboard.html">Leaderboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#rewardsModal">Rewards
                                <span class="badge bg-success" id="points-badge">0</span></a>
                        </li>
                        <li class="nav-item" id="teacher-nav-item">
                            <a class="nav-link" href="teacher.html">Teacher</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="interactive-demos.html">
                                Coming Soon <span class="badge bg-warning text-dark">New</span>
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                More Options
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">‚öôÔ∏è Settings</a></li>
                                <li><a class="dropdown-item" href="#">üèÜ Points</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">üë§ Account Info</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link disabled">Disabled</a>
                        </li>
                    </ul>

                    <!-- Search Box -->
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn" type="submit">Search</button>
                    </form>

                    <form action="login.html" class="d-flex">
                        <button class="logout btn">Logout</button>
                    </form>
                </div>
            </div>
        </nav>


        <div class="sideBar">
            <h4 class="sidebar-title">Select Grade</h4>
            <div class="grade-buttons">

                <button class="grade-btn" data-grade="6">Grade 6</button>
                <button class="grade-btn" data-grade="7">Grade 7</button>
                <button class="grade-btn" data-grade="8">Grade 8</button>
                <button class="grade-btn" data-grade="9">Grade 9</button>
                <button class="grade-btn" data-grade="10">Grade 10</button>
                <button class="grade-btn" data-grade="11">Grade 11</button>
                <button class="grade-btn" data-grade="12">Grade 12</button>
            </div>
        </div>

        <div class="mainContent">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="content-section">
                <div class="welcome-header">

                    <h2>üéì EduGameHub - STEM Learning</h2>
                    <p>Select a grade from the sidebar to explore STEM subjects and take quizzes!</p>

                </div>
                <div class="features-grid">
                    <div class="feature-card">
                        <h4>üî¨ Science</h4>
                        <p>Explore biology, chemistry, physics, and earth sciences</p>
                    </div>
                    <div class="feature-card">
                        <h4>üî¢ Mathematics</h4>
                        <p>Master algebra, geometry, calculus, and statistics</p>
                    </div>
                    <div class="feature-card">
                        <h4>‚öôÔ∏è Technology</h4>
                        <p>Learn programming, engineering, and digital skills</p>
                    </div>
                    <div class="feature-card">
                        <h4>üèóÔ∏è Engineering</h4>
                        <p>Understand design, construction, and problem-solving</p>
                    </div>
                </div>
            </div>

            <!-- Subject Selection Screen -->
            <div id="subject-selection" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2>Grade <span id="selected-grade">6</span> - Choose a Subject</h2>
                    <button id="back-to-grades" class="back-btn">‚Üê Back to Grades</button>
                </div>
                <div class="subjects-grid">
                    <div class="subject-card" data-subject="science">
                        <div class="subject-icon">üî¨</div>
                        <h3>Science</h3>
                        <p id="science-description">Biology, Chemistry, Physics, Earth Science</p>
                        <div class="subject-actions">
                            <button class="subject-btn" data-subject="science">Start Quiz</button>
                            <button class="flashcards-btn" data-subject="science">Start Flashcards</button>
                            <button class="modules-btn" data-subject="science">Learn Modules</button>
                            <button class="crossword-btn" data-subject="science">Play Crossword</button>
                            <button class="chem-lab-btn" data-subject="science">Virtual Chem Lab</button>
                            <button class="video-btn" data-subject="science">üì∫ Watch Videos</button>
                        </div>
                    </div>
                    <div class="subject-card" data-subject="mathematics">
                        <div class="subject-icon">üî¢</div>
                        <h3>Mathematics</h3>
                        <p id="math-description">Algebra, Geometry, Statistics, Problem Solving</p>
                        <div class="subject-actions">
                            <button class="subject-btn" data-subject="mathematics">Start Quiz</button>
                            <button class="flashcards-btn" data-subject="mathematics">Start Flashcards</button>
                            <button class="modules-btn" data-subject="mathematics">Learn Modules</button>
                            <button class="shooter-btn" data-subject="mathematics">Play Math Shooter</button>
                            <button class="crossword-btn" data-subject="mathematics">Play Crossword</button>
                            <button class="video-btn" data-subject="mathematics">üì∫ Watch Videos</button>
                        </div>
                    </div>
                    <div class="subject-card" data-subject="technology">
                        <div class="subject-icon">‚öôÔ∏è</div>
                        <h3>Technology</h3>
                        <p id="tech-description">Programming, Computer Science, Digital Skills</p>
                        <div class="subject-actions">
                            <button class="subject-btn" data-subject="technology">Start Quiz</button>
                            <button class="flashcards-btn" data-subject="technology">Start Flashcards</button>
                            <button class="modules-btn" data-subject="technology">Learn Modules</button>
                            <button class="crossword-btn" data-subject="technology">Play Crossword</button>
                            <button class="video-btn" data-subject="technology">üì∫ Watch Videos</button>
                        </div>
                    </div>
                    <div class="subject-card" data-subject="engineering">
                        <div class="subject-icon">üèóÔ∏è</div>
                        <h3>Engineering</h3>
                        <p id="eng-description">Design, Construction, Problem Solving, Innovation</p>
                        <div class="subject-actions">
                            <button class="subject-btn" data-subject="engineering">Start Quiz</button>
                            <button class="flashcards-btn" data-subject="engineering">Start Flashcards</button>
                            <button class="modules-btn" data-subject="engineering">Learn Modules</button>
                            <button class="crossword-btn" data-subject="engineering">Play Crossword</button>
                            <button class="video-btn" data-subject="engineering">üì∫ Watch Videos</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-screen" class="content-section" style="display: none;">
                <div class="quiz-header">
                    <h2 id="quiz-title">Grade <span id="quiz-grade">6</span> - <span id="quiz-subject">Science</span>
                        Quiz</h2>
                    <div class="quiz-stats">
                        <span class="stat">Question <span id="current-q">1</span> of <span
                                id="total-qs">10</span></span>
                        <span class="stat">Score: <span id="score">0</span></span>
                        <span class="stat">Time: <span id="timer">30</span>s</span>
                    </div>
                    <button id="back-to-subjects" class="back-btn">‚Üê Back to Subjects</button>
                </div>

                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress"></div>
                    </div>
                </div>

                <div class="question-container">
                    <h3 id="question-text">Loading question...</h3>
                    <div class="options-container" id="options">
                        <!-- Options will be dynamically generated -->
                    </div>
                </div>

                <div class="quiz-controls">
                    <button id="next-question" class="quiz-btn" disabled>Next Question</button>
                    <button id="submit-quiz" class="quiz-btn" style="display: none;">Submit Quiz</button>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="results-screen" class="content-section" style="display: none;">
                <div class="results-header">
                    <h2>üéâ Quiz Complete!</h2>
                    <div class="score-display">
                        <h3>Your Score: <span id="final-score">0</span>/<span id="max-score">10</span></h3>
                        <div class="percentage" id="percentage">0%</div>
                    </div>
                </div>

                <div class="results-info">
                    <div class="result-item">
                        <h4>üìä Performance</h4>
                        <p id="performance">Great job!</p>
                    </div>
                    <div class="result-item">
                        <h4>‚è±Ô∏è Time Taken</h4>
                        <p id="time-taken">0 minutes</p>
                    </div>
                    <div class="result-item">
                        <h4>üéØ Accuracy</h4>
                        <p id="accuracy">0%</p>
                    </div>
                </div>

                <div class="results-actions">
                    <button id="retry-quiz" class="action-btn">Retry Quiz</button>
                    <button id="new-subject" class="action-btn">Try Different Subject</button>
                    <button id="new-grade" class="action-btn">Choose Different Grade</button>
                </div>
            </div>

            <!-- Rewards Modal -->
            <div class="modal fade" id="rewardsModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Rewards & Unlocks</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>Your points: <strong id="points-current">0</strong></p>
                            <ul class="list-group" id="rewards-list">
                                <!-- Filled by script -->
                            </ul>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Flashcards Screen -->
            <div id="flashcards-screen" class="content-section" style="display: none;">
                <div class="quiz-header">
                    <h2 id="flashcards-title">Grade <span id="flashcards-grade">6</span> - <span
                            id="flashcards-subject">Science</span> Flashcards</h2>
                    <div class="quiz-stats">
                        <span class="stat">Card <span id="current-card">1</span> of <span
                                id="total-cards">10</span></span>
                    </div>
                    <button id="back-to-subjects-from-flashcards" class="back-btn">‚Üê Back to Subjects</button>
                </div>

                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard">
                        <div class="flashcard-inner" id="flashcard-inner">
                            <div class="flashcard-face flashcard-front" id="flashcard-front">Loading...</div>
                            <div class="flashcard-face flashcard-back" id="flashcard-back">Answer</div>
                        </div>
                    </div>
                </div>

                <div class="quiz-controls">
                    <button id="prev-card" class="quiz-btn">Prev</button>
                    <button id="flip-card" class="quiz-btn">Flip</button>
                    <button id="next-card" class="quiz-btn">Next</button>
                </div>
            </div>

            <!-- Math Shooter Screen -->
            <div id="shooter-screen" class="content-section" style="display: none;">
                <div class="quiz-header">
                    <h2>Grade <span id="shooter-grade">6</span> - Mathematics Shooter</h2>
                    <div class="shooter-stats">
                        <span class="stat">Score: <span id="shooter-score">0</span></span>
                        <span class="stat">Lives: <span id="shooter-lives">3</span></span>
                        <span class="stat">Solve: <span id="shooter-problem">1 + 1 = ?</span></span>
                    </div>
                    <button id="back-to-subjects-from-shooter" class="back-btn">‚Üê Back to Subjects</button>
                </div>

                <div class="shooter-container">
                    <canvas id="shooter-canvas" width="900" height="500"></canvas>
                </div>

                <div class="control-hint">Use ‚Üê ‚Üí or A/D to move, Space to shoot the correct answer.</div>
            </div>

            <!-- Crossword Screen -->
            <div id="crossword-screen" class="content-section" style="display: none;">
                <div class="quiz-header">
                    <h2>Grade <span id="crossword-grade">6</span> - <span id="crossword-subject">Science</span>
                        Crossword</h2>
                    <button id="back-to-subjects-from-crossword" class="back-btn">‚Üê Back to Subjects</button>
                </div>
                <div class="crossword-container" style="display:flex; gap:24px; align-items:start; flex-wrap: wrap;">
                    <div id="crossword-grid"
                        style="display:grid; grid-template-columns: repeat(10, 36px); grid-auto-rows: 36px; gap:4px;">
                    </div>
                    <div class="crossword-clues" style="flex:1; min-width:260px;">
                        <h4>Across</h4>
                        <ol id="clues-across"></ol>
                        <h4 class="mt-3">Down</h4>
                        <ol id="clues-down"></ol>
                        <button id="crossword-check" class="quiz-btn mt-3">Check Answers</button>
                    </div>
                </div>
            </div>

            <!-- Chemistry Lab Screen -->
            <div id="chem-lab-screen" class="content-section" style="display: none;">
                <div class="quiz-header">
                    <h2>Grade <span id="chem-grade">6</span> - Virtual Chemistry Lab</h2>
                    <button id="back-to-subjects-from-chem" class="back-btn">‚Üê Back to Subjects</button>
                </div>
                <div class="chem-lab" style="display:flex; gap:24px; align-items:start; flex-wrap: wrap;">
                    <div class="chem-elements" style="min-width:260px;">
                        <h4>Elements</h4>
                        <div id="elements-list" style="display:flex; gap:8px; flex-wrap:wrap;"></div>
                    </div>
                    <div class="chem-workbench" style="flex:1; min-width:320px;">

                        <div class="beakers" style="display:flex; gap:16px;">
                            <div class="beaker" data-beaker="A"
                                style="width:180px; height:220px; border:2px solid #6c757d; border-radius:8px; position:relative; background:linear-gradient(#f8f9fa,#e9ecef);">
                                <div class="beaker-label"
                                    style="position:absolute; top:-22px; left:0; font-weight:bold;">Beaker A</div>
                                <div class="drop-zone" data-zone="A"
                                    style="position:absolute; inset:8px; border:1px dashed #adb5bd; border-radius:6px;">
                                </div>
                            </div>
                            <div class="beaker" data-beaker="B"
                                style="width:180px; height:220px; border:2px solid #6c757d; border-radius:8px; position:relative; background:linear-gradient(#f8f9fa,#e9ecef);">
                                <div class="beaker-label"
                                    style="position:absolute; top:-22px; left:0; font-weight:bold;">Beaker B</div>
                                <div class="drop-zone" data-zone="B"
                                    style="position:absolute; inset:8px; border:1px dashed #adb5bd; border-radius:6px;">
                                </div>
                            </div>
                        </div>
                        <div class="mix-controls"
                            style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
                            <button id="chem-mix" class="quiz-btn">Mix</button>
                            <button id="chem-clear" class="quiz-btn">Clear</button>
                            <div id="chem-formula" style="font-weight:bold;"></div>
                        </div>
                        <div id="chem-result" style="margin-top:8px;"></div>
                    </div>
                </div>
            </div>

            <!-- Learning Modules Screen -->
            <div id="modules-screen" class="content-section" style="display: none;">
                <div class="quiz-header">
                    <h2>Grade <span id="modules-grade">6</span> - <span id="modules-subject">Science</span> Learning
                        Modules</h2>
                    <button id="back-to-subjects-from-modules" class="back-btn">‚Üê Back to Subjects</button>
                </div>

                <div class="modules-grid" id="modules-grid">
                    <!-- Modules will be dynamically generated -->
                </div>
            </div>

            <!-- Individual Module Screen -->
            <div id="module-detail-screen" class="content-section" style="display: none;">
                <div class="quiz-header">
                    <h2 id="module-title">Module Title</h2>
                    <div class="module-navigation">
                        <button id="back-to-modules" class="back-btn">‚Üê Back to Modules</button>
                        <button id="module-quiz-btn" class="quiz-btn">Take Quiz</button>
                    </div>
                </div>

                <div class="module-content">
                    <div class="module-intro" id="module-intro">
                        <!-- Introduction content -->
                    </div>

                    <div class="module-main" id="module-main">
                        <!-- Main content -->
                    </div>

                    <div class="module-interactive" id="module-interactive">
                        <!-- Interactive elements -->
                    </div>

                    <div class="module-quiz" id="module-quiz" style="display: none;">
                        <!-- Module quiz -->
                    </div>
                </div>

                <div class="module-controls">
                    <button id="prev-section" class="quiz-btn" style="display: none;">Previous</button>
                    <button id="next-section" class="quiz-btn">Next</button>
                </div>
            </div>
        </div>


    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Interactive Learning Modules Database
        const learningModules = {
            6: {
                science: [
                    {
                        id: "photosynthesis",
                        title: "üå± Photosynthesis",
                        description: "Learn how plants make their own food",
                        content: {
                            introduction: "Photosynthesis is the process by which plants convert sunlight into energy. Let's explore this amazing process!",
                            mainContent: "Plants use their green leaves to capture sunlight. Inside the leaves are tiny structures called chloroplasts that contain chlorophyll - the green pigment that gives plants their color.",
                            interactive: {
                                type: "animation",
                                elements: [
                                    { id: "sun", label: "Sunlight", position: "top", color: "#FFD700" },
                                    { id: "leaf", label: "Leaf", position: "center", color: "#228B22" },
                                    { id: "oxygen", label: "Oxygen", position: "right", color: "#87CEEB" },
                                    { id: "glucose", label: "Glucose", position: "left", color: "#DDA0DD" }
                                ]
                            },
                            quiz: {
                                question: "What do plants need for photosynthesis?",
                                options: ["Sunlight, water, and carbon dioxide", "Only sunlight", "Only water", "Only carbon dioxide"],
                                correct: 0,
                                explanation: "Plants need sunlight, water, and carbon dioxide to perform photosynthesis."
                            }
                        }
                    },
                    {
                        id: "solar-system",
                        title: "ü™ê Our Solar System",
                        description: "Explore the planets in our solar system",
                        content: {
                            introduction: "Our solar system is home to 8 planets, each with unique characteristics. Let's take a journey through space!",
                            mainContent: "The solar system formed about 4.6 billion years ago. The Sun is at the center, and all planets orbit around it. The inner planets (Mercury, Venus, Earth, Mars) are rocky, while the outer planets (Jupiter, Saturn, Uranus, Neptune) are gas giants.",
                            interactive: {
                                type: "planet-explorer",
                                planets: [
                                    { name: "Mercury", distance: 0.4, size: 0.4, color: "#8C7853", facts: ["Closest to the Sun", "No atmosphere", "Extreme temperatures"] },
                                    { name: "Venus", distance: 0.7, size: 0.9, color: "#FFC649", facts: ["Hottest planet", "Thick atmosphere", "Retrograde rotation"] },
                                    { name: "Earth", distance: 1.0, size: 1.0, color: "#6B93D6", facts: ["Only planet with life", "71% water", "One moon"] },
                                    { name: "Mars", distance: 1.5, size: 0.5, color: "#CD5C5C", facts: ["Red planet", "Two moons", "Largest volcano"] }
                                ]
                            },
                            quiz: {
                                question: "Which planet is known as the Red Planet?",
                                options: ["Venus", "Mars", "Jupiter", "Saturn"],
                                correct: 1,
                                explanation: "Mars is called the Red Planet because of iron oxide (rust) on its surface."
                            }
                        }
                    },
                    { id: "states-of-matter", title: "üßä States of Matter", description: "Solid, liquid, and gas", content: { introduction: "Matter exists in different states based on temperature!", mainContent: "Solids have fixed shape/volume. Liquids have fixed volume but flow. Gases expand to fill containers. Heating makes particles move faster and change state!", interactive: { type: "state-changer", examples: [] }, quiz: { question: "What happens to water at 100¬∞C?", options: ["Freezes", "Stays liquid", "Turns to steam", "Disappears"], correct: 2, explanation: "At 100¬∞C, water boils into steam (gas state)." } } },
                    { id: "water-cycle", title: "üåä Water Cycle", description: "How water moves through Earth", content: { introduction: "Water constantly cycles through Earth's systems!", mainContent: "Evaporation (sun heats water) ‚Üí Condensation (vapor makes clouds) ‚Üí Precipitation (rain/snow falls) ‚Üí Collection (water gathers).", interactive: { type: "cycle-animation", stages: [] }, quiz: { question: "What is water turning to vapor called?", options: ["Condensation", "Precipitation", "Evaporation", "Collection"], correct: 2, explanation: "Evaporation changes water from liquid to gas." } } }
                ],
                mathematics: [
                    {
                        id: "fractions",
                        title: "üçï Understanding Fractions",
                        description: "Learn about parts of a whole",
                        content: {
                            introduction: "Fractions represent parts of a whole. Think of a pizza cut into slices - each slice is a fraction of the whole pizza!",
                            mainContent: "A fraction has two parts: the numerator (top number) tells us how many parts we have, and the denominator (bottom number) tells us how many equal parts the whole is divided into.",
                            interactive: {
                                type: "fraction-visualizer",
                                examples: [
                                    { numerator: 1, denominator: 2, visual: "pizza-half", description: "Half a pizza" },
                                    { numerator: 3, denominator: 4, visual: "pizza-three-quarters", description: "Three quarters of a pizza" },
                                    { numerator: 2, denominator: 3, visual: "pizza-two-thirds", description: "Two thirds of a pizza" }
                                ]
                            },
                            quiz: {
                                question: "In the fraction 3/4, what does the 4 represent?",
                                options: ["How many parts we have", "How many equal parts the whole is divided into", "The total number", "The remainder"],
                                correct: 1,
                                explanation: "The denominator (4) tells us how many equal parts the whole is divided into."
                            }
                        }
                    },
                    {
                        id: "geometry-basics",
                        title: "üìê Basic Shapes",
                        description: "Explore different geometric shapes",
                        content: {
                            introduction: "Geometry is all around us! Let's learn about different shapes and their properties.",
                            mainContent: "Shapes have different properties like sides, angles, and symmetry. Some shapes are 2D (flat) like circles and squares, while others are 3D (solid) like cubes and spheres.",
                            interactive: {
                                type: "shape-builder",
                                shapes: [
                                    { name: "Triangle", sides: 3, angles: 3, color: "#FF6B6B", properties: ["Three sides", "Three angles", "Sum of angles = 180¬∞"] },
                                    { name: "Square", sides: 4, angles: 4, color: "#4ECDC4", properties: ["Four equal sides", "Four right angles", "Two lines of symmetry"] },
                                    { name: "Circle", sides: 0, angles: 0, color: "#45B7D1", properties: ["No sides", "No angles", "Infinite lines of symmetry"] }
                                ]
                            },
                            quiz: {
                                question: "How many sides does a triangle have?",
                                options: ["2", "3", "4", "5"],
                                correct: 1,
                                explanation: "A triangle has exactly 3 sides and 3 angles."
                            }
                        }
                    },
                    { id: "decimals", title: "üî¢ Decimals", description: "Numbers with decimal points", content: { introduction: "Decimals represent parts of a whole!", mainContent: "Place value: tenths (0.1), hundredths (0.01), thousandths (0.001). Line up decimal points when adding!", interactive: { type: "decimal-grid", examples: [] }, quiz: { question: "What is 0.5 + 0.3?", options: ["0.2", "0.8", "0.53", "0.35"], correct: 1, explanation: "0.5 + 0.3 = 0.8 (5 tenths + 3 tenths = 8 tenths)" } } },
                    { id: "perimeter-area", title: "üìè Perimeter & Area", description: "Measuring shapes", content: { introduction: "Perimeter is distance around, area is space inside!", mainContent: "Rectangle: Perimeter = 2(l+w), Area = l√ów. Square: P = 4s, A = s¬≤.", interactive: { type: "shape-measurer", shapes: [] }, quiz: { question: "Area of rectangle 5√ó3?", options: ["8", "15", "16", "25"], correct: 1, explanation: "Area = length √ó width = 5 √ó 3 = 15" } } }
                ],
                technology: [
                    {
                        id: "computer-basics",
                        title: "üíª Computer Components",
                        description: "Learn about the parts of a computer",
                        content: {
                            introduction: "Computers are amazing machines made up of different components working together. Let's explore what's inside!",
                            mainContent: "A computer has several important parts: the CPU (brain), RAM (memory), storage, and input/output devices. Each part has a specific job to help the computer work.",
                            interactive: {
                                type: "computer-builder",
                                components: [
                                    { name: "CPU", description: "Central Processing Unit - the brain", icon: "üß†", function: "Processes instructions" },
                                    { name: "RAM", description: "Random Access Memory - temporary storage", icon: "üíæ", function: "Stores data while working" },
                                    { name: "Storage", description: "Hard drive or SSD - permanent storage", icon: "üíø", function: "Saves files permanently" },
                                    { name: "Motherboard", description: "Main circuit board", icon: "üîå", function: "Connects all components" }
                                ]
                            },
                            quiz: {
                                question: "What does CPU stand for?",
                                options: ["Central Processing Unit", "Computer Processing Unit", "Central Program Unit", "Computer Program Unit"],
                                correct: 0,
                                explanation: "CPU stands for Central Processing Unit - it's the brain of the computer."
                            }
                        }
                    },
                    { id: "digital-citizenship", title: "üë• Digital Citizenship", description: "Being responsible online", content: { introduction: "Learn to be a good digital citizen!", mainContent: "Respect others, protect privacy, verify info, be kind online.", interactive: { type: "scenario-trainer", scenarios: [] }, quiz: { question: "What should you do before sharing?", options: ["Share immediately", "Think if kind and true", "Tell everyone", "Copy others"], correct: 1, explanation: "Always think before sharing." } } },
                    { id: "computer-safety", title: "üîí Computer Safety", description: "Staying safe with technology", content: { introduction: "Keep yourself and computer safe!", mainContent: "Strong passwords, don't click suspicious links, ask adults before downloading.", interactive: { type: "safety-tips", tips: [] }, quiz: { question: "What makes a good password?", options: ["Your name", "12345", "Mix letters/numbers/symbols", "password"], correct: 2, explanation: "Mix letters, numbers, symbols." } } }
                ],
                engineering: [
                    {
                        id: "simple-machines",
                        title: "‚öôÔ∏è Simple Machines",
                        description: "Discover the building blocks of engineering",
                        content: {
                            introduction: "Simple machines are the basic tools that make work easier. Engineers use these to build complex machines!",
                            mainContent: "There are six types of simple machines: lever, wheel and axle, pulley, inclined plane, wedge, and screw. Each one helps us do work with less effort.",
                            interactive: {
                                type: "machine-explorer",
                                machines: [
                                    { name: "Lever", example: "See-saw", advantage: "Lifts heavy objects", icon: "‚öñÔ∏è" },
                                    { name: "Pulley", example: "Flag pole", advantage: "Changes direction of force", icon: "üéØ" },
                                    { name: "Inclined Plane", example: "Ramp", advantage: "Moves objects up easily", icon: "üìê" },
                                    { name: "Wheel and Axle", example: "Door knob", advantage: "Rotates objects", icon: "üé°" }
                                ]
                            },
                            quiz: {
                                question: "What simple machine is a see-saw?",
                                options: ["Pulley", "Lever", "Wedge", "Screw"],
                                correct: 1,
                                explanation: "A see-saw is a lever - it uses a fulcrum to lift objects."
                            }
                        }
                    },
                    { id: "gears-pulleys", title: "‚öôÔ∏è Gears & Pulleys", description: "Machines that multiply force", content: { introduction: "Gears and pulleys help lift heavy things!", mainContent: "Gears transfer motion, pulleys provide mechanical advantage.", interactive: { type: "gear-simulator", gears: [] }, quiz: { question: "What do pulleys help us do?", options: ["Make heavier", "Lift easier", "Make noise", "Create electricity"], correct: 1, explanation: "Pulleys provide mechanical advantage." } } },
                    { id: "bicycle-mechanics", title: "üö≤ Bicycle Mechanics", description: "How bicycles work", content: { introduction: "Bicycles use simple machines!", mainContent: "Bikes use wheels, gears, levers, chains to transfer force.", interactive: { type: "bike-builder", parts: [] }, quiz: { question: "What simple machine are bike pedals?", options: ["Pulley", "Lever", "Wedge", "Screw"], correct: 1, explanation: "Pedals are levers." } } }
                ]
            },
            7: {
                science: [{ id: "cell-structure", title: "üî¨ Cell Structure", description: "Building blocks of life", content: { introduction: "Cells are the basic units!", mainContent: "Nucleus controls, mitochondria produce energy.", interactive: { type: "cell-explorer", organelles: [] }, quiz: { question: "Powerhouse of cell?", options: ["Nucleus", "Mitochondria", "Membrane", "Ribosome"], correct: 1, explanation: "Mitochondria produce energy." } } }, { id: "ecosystems", title: "üåø Ecosystems", description: "Living things interact", content: { introduction: "Ecosystems are communities!", mainContent: "Producers make food, consumers eat, decomposers break down.", interactive: { type: "food-web", organisms: [] }, quiz: { question: "What do producers do?", options: ["Eat plants", "Make food", "Decompose", "Hunt"], correct: 1, explanation: "Producers make their own food." } } }, { id: "matter-energy", title: "‚ö° Matter & Energy", description: "Energy transformations", content: { introduction: "Energy changes form!", mainContent: "Energy can't be created/destroyed, only transformed.", interactive: { type: "energy-transformer", examples: [] }, quiz: { question: "What happens in transformations?", options: ["Destroyed", "Changes form", "Disappears", "Multiplies"], correct: 1, explanation: "Energy changes form." } } }],
                mathematics: [{ id: "integers", title: "‚ûï‚ûñ Integers", description: "Positive and negative", content: { introduction: "Integers include positive, negative, zero!", mainContent: "Add/subtract integers.", interactive: { type: "number-line", examples: [] }, quiz: { question: "-8 + 5?", options: ["-13", "-3", "3", "13"], correct: 1, explanation: "Subtract, use larger sign." } } }, { id: "ratios-proportions", title: "üìä Ratios & Proportions", description: "Comparing quantities", content: { introduction: "Ratios compare quantities!", mainContent: "Ratio 3:4 means 3 for every 4. Proportions are equal ratios.", interactive: { type: "ratio-visualizer", examples: [] }, quiz: { question: "If ratio 2:3, first=4, second=?", options: ["5", "6", "7", "8"], correct: 1, explanation: "2:3 = 4:6" } } }, { id: "percent", title: "% Percentages", description: "Out of 100", content: { introduction: "Percent means per hundred!", mainContent: "50% = 50/100 = 0.5.", interactive: { type: "percent-calculator", problems: [] }, quiz: { question: "25% of 80?", options: ["15", "20", "25", "30"], correct: 1, explanation: "0.25 √ó 80 = 20" } } }],
                technology: [{ id: "internet-basics", title: "üåê Internet Basics", description: "How Internet works", content: { introduction: "Internet connects billions!", mainContent: "Data in packets through routers.", interactive: { type: "network-simulator", components: [] }, quiz: { question: "DNS stands for?", options: ["Domain Name System", "Digital Network Service", "Data Network Server", "Domain Name Service"], correct: 0, explanation: "DNS translates names to IPs." } } }, { id: "spreadsheets", title: "üìä Spreadsheets", description: "Organizing data", content: { introduction: "Spreadsheets organize data!", mainContent: "Rows/columns, formulas like =SUM(), =AVERAGE().", interactive: { type: "spreadsheet-sim", examples: [] }, quiz: { question: "What does =SUM(A1:A5) do?", options: ["Delete", "Add A1-A5", "Multiply", "Sort"], correct: 1, explanation: "SUM adds range." } } }, { id: "data-viz", title: "üìà Data Visualization", description: "Charts and graphs", content: { introduction: "Pictures make data clear!", mainContent: "Bar charts compare, line graphs show trends, pie charts show parts.", interactive: { type: "chart-creator", data: [] }, quiz: { question: "Show data over time?", options: ["Pie", "Bar", "Line", "Table"], correct: 2, explanation: "Line graphs show trends." } } }],
                engineering: [{ id: "bridges", title: "üåâ Bridge Design", description: "Structures connect", content: { introduction: "Bridges cross obstacles!", mainContent: "Types: beam, arch, suspension, truss.", interactive: { type: "bridge-builder", types: [] }, quiz: { question: "Best for long spans?", options: ["Beam", "Arch", "Suspension", "Truss"], correct: 2, explanation: "Suspension for long distances." } } }, { id: "levers-daily", title: "üèóÔ∏è Levers Daily", description: "Levers around us", content: { introduction: "Levers everywhere!", mainContent: "3 classes based on fulcrum: scissors, wheelbarrow, tweezers.", interactive: { type: "lever-identifier", tools: [] }, quiz: { question: "Seesaw lever class?", options: ["First", "Second", "Third", "Not lever"], correct: 0, explanation: "First class - fulcrum in middle." } } }, { id: "mech-advantage", title: "üí™ Mechanical Advantage", description: "Making work easier", content: { introduction: "MA multiplies force!", mainContent: "MA = Output/Input force. MA>1 = less force needed.", interactive: { type: "ma-calculator", machines: [] }, quiz: { question: "MA is 4 means?", options: ["4x more force", "Lift 4x weight", "4x faster", "No advantage"], correct: 1, explanation: "Lift 4x the weight." } } }]
            },
            8: {
                science: [{ id: "force-motion", title: "‚ö° Force & Motion", description: "Newton's laws", content: { introduction: "Newton's laws!", mainContent: "F=ma, action-reaction.", interactive: { type: "physics-simulator", laws: [] }, quiz: { question: "Newton's 3rd Law?", options: ["Equal/opposite reaction", "F=ma", "Inertia", "Gravity"], correct: 0, explanation: "Action=reaction." } } }, { id: "waves-sound", title: "üéµ Waves & Sound", description: "Wave motion", content: { introduction: "Waves transfer energy!", mainContent: "Frequency, wavelength, amplitude. Sound waves need medium.", interactive: { type: "wave-simulator", waves: [] }, quiz: { question: "Sound travel in vacuum?", options: ["Yes", "No", "Sometimes", "Depends"], correct: 1, explanation: "Sound needs medium." } } }, { id: "light-optics", title: "üî¶ Light & Optics", description: "How light behaves", content: { introduction: "Light reflects and refracts!", mainContent: "Reflection, refraction, lenses, mirrors.", interactive: { type: "light-ray", demo: [] }, quiz: { question: "Light bends in water?", options: ["Reflection", "Refraction", "Absorption", "Emission"], correct: 1, explanation: "Refraction bends light." } } }],
                mathematics: [{ id: "linear-equations", title: "üìà Linear Equations", description: "Graphing", content: { introduction: "Lines!", mainContent: "y=mx+b.", interactive: { type: "graph-plotter", equations: [] }, quiz: { question: "Slope in y=3x+5?", options: ["3", "5", "8", "x"], correct: 0, explanation: "Slope=3." } } }, { id: "pythagorean", title: "üî∫ Pythagorean Theorem", description: "Right triangles", content: { introduction: "a¬≤+b¬≤=c¬≤!", mainContent: "For right triangles: leg¬≤ + leg¬≤ = hypotenuse¬≤.", interactive: { type: "triangle-builder", demo: [] }, quiz: { question: "3¬≤+4¬≤=?", options: ["5", "25", "7", "12"], correct: 1, explanation: "9+16=25, c=5." } } }, { id: "systems-equations", title: "‚öñÔ∏è Systems of Equations", description: "Multiple equations", content: { introduction: "Solve two equations together!", mainContent: "Substitution or elimination method.", interactive: { type: "system-solver", problems: [] }, quiz: { question: "How many solutions for parallel lines?", options: ["0", "1", "2", "Infinite"], correct: 0, explanation: "Parallel never meet." } } }],
                technology: [{ id: "programming-basics", title: "üíæ Programming", description: "Code!", content: { introduction: "Instructions to computers!", mainContent: "Variables, loops, conditions.", interactive: { type: "code-builder", concepts: [] }, quiz: { question: "Repeats code?", options: ["Variables", "Loops", "Conditions", "Functions"], correct: 1, explanation: "Loops repeat." } } }, { id: "boolean-logic", title: "üî≤ Boolean Logic", description: "True/False logic", content: { introduction: "Binary logic!", mainContent: "AND, OR, NOT gates. TRUE=1, FALSE=0.", interactive: { type: "logic-simulator", gates: [] }, quiz: { question: "TRUE AND FALSE?", options: ["TRUE", "FALSE", "ERROR", "MAYBE"], correct: 1, explanation: "Both must be TRUE for AND." } } }, { id: "logic-gates", title: "üö™ Logic Gates", description: "Digital circuits", content: { introduction: "Building blocks of computers!", mainContent: "AND, OR, NOT, NAND, NOR, XOR gates.", interactive: { type: "gate-builder", circuits: [] }, quiz: { question: "Output of NOT gate with 1?", options: ["0", "1", "ERROR", "2"], correct: 0, explanation: "NOT inverts." } } }],
                engineering: [{ id: "circuits", title: "‚ö° Circuits", description: "Electricity flows", content: { introduction: "Electricity powers world!", mainContent: "Series and parallel circuits.", interactive: { type: "circuit-builder", components: [] }, quiz: { question: "One bulb fails in series?", options: ["All out", "Others on", "Overheats", "Nothing"], correct: 0, explanation: "One path." } } }, { id: "wind-power", title: "üí® Wind Power", description: "Harnessing wind", content: { introduction: "Wind creates electricity!", mainContent: "Turbines convert kinetic to electrical energy.", interactive: { type: "wind-simulator", turbines: [] }, quiz: { question: "Wind turbines convert?", options: ["Light to heat", "Wind to electricity", "Water to power", "Solar to wind"], correct: 1, explanation: "Kinetic to electrical." } } }, { id: "hydraulics", title: "üíß Hydraulics", description: "Power from fluids", content: { introduction: "Liquids transmit force!", mainContent: "Pascal's principle: pressure in closed system.", interactive: { type: "hydraulic-press", demo: [] }, quiz: { question: "Hydraulics use?", options: ["Air", "Liquid", "Vacuum", "Solid"], correct: 1, explanation: "Liquids transmit pressure." } } }]
            },
            9: {
                science: [{ id: "genetics", title: "üß¨ Genetics", description: "Heredity", content: { introduction: "Traits passed down!", mainContent: "DNA, genes, Punnett squares.", interactive: { type: "punnett-square", traits: [] }, quiz: { question: "Bb √ó Bb?", options: ["All brown", "All blue", "75% brown", "50-50"], correct: 2, explanation: "3 brown, 1 blue." } } }, { id: "acids-bases", title: "‚öóÔ∏è Acids & Bases", description: "pH scale", content: { introduction: "Acids sour, bases bitter!", mainContent: "pH<7 acid, pH=7 neutral, pH>7 base.", interactive: { type: "ph-tester", substances: [] }, quiz: { question: "Lemon juice pH?", options: ["2 (acid)", "7 (neutral)", "10 (base)", "14 (base)"], correct: 0, explanation: "Lemon is acidic." } } }, { id: "ecology", title: "üåç Ecology", description: "Environment interactions", content: { introduction: "Organisms and environment!", mainContent: "Food webs, energy pyramids, biomes.", interactive: { type: "biome-explorer", biomes: [] }, quiz: { question: "Energy pyramid base?", options: ["Producers", "Herbivores", "Carnivores", "Decomposers"], correct: 0, explanation: "Producers at bottom." } } }],
                mathematics: [{ id: "quadratics", title: "üìä Quadratics", description: "Parabolas", content: { introduction: "U-shaped curves!", mainContent: "ax¬≤+bx+c=0.", interactive: { type: "quadratic-solver", problems: [] }, quiz: { question: "Quadratic graph shape?", options: ["Line", "Parabola", "Circle", "Hyperbola"], correct: 1, explanation: "U-shaped parabola." } } }, { id: "functions", title: "üìä Functions", description: "Input-output", content: { introduction: "Maps inputs to outputs!", mainContent: "f(x) notation, domain, range.", interactive: { type: "function-machine", examples: [] }, quiz: { question: "f(x)=2x+1, f(3)=?", options: ["5", "6", "7", "8"], correct: 2, explanation: "2(3)+1=7." } } }, { id: "polynomials", title: "üì® Polynomials", description: "Multiple terms", content: { introduction: "Sums of terms!", mainContent: "Add, subtract, multiply polynomials.", interactive: { type: "poly-calculator", operations: [] }, quiz: { question: "(x+2)(x+3)=?", options: ["x¬≤+5", "x¬≤+5x+6", "x¬≤+6", "2x+5"], correct: 1, explanation: "FOIL method." } } }],
                technology: [{ id: "web-dev", title: "üåê Web Development", description: "Build websites", content: { introduction: "HTML, CSS, JavaScript!", mainContent: "HTML structures, CSS styles, JS interacts.", interactive: { type: "web-builder", technologies: [] }, quiz: { question: "Which adds interactivity?", options: ["HTML", "CSS", "JavaScript", "Python"], correct: 2, explanation: "JS adds behavior." } } }, { id: "js-functions", title: "üîÉ JavaScript Functions", description: "Reusable code", content: { introduction: "Functions do tasks!", mainContent: "function name(params) { code }.", interactive: { type: "js-playground", examples: [] }, quiz: { question: "Why use functions?", options: ["Slower code", "Reuse code", "More errors", "Harder"], correct: 1, explanation: "Functions enable reuse." } } }, { id: "dom-manipulation", title: "üéØ DOM Manipulation", description: "Change web pages", content: { introduction: "Modify HTML dynamically!", mainContent: "getElementById, innerHTML, addEventListener.", interactive: { type: "dom-editor", demo: [] }, quiz: { question: "Get element by ID?", options: ["getElement", "getElementById", "findElement", "selectId"], correct: 1, explanation: "document.getElementById()." } } }],
                engineering: [{ id: "renewable", title: "‚ôªÔ∏è Renewable Energy", description: "Clean energy", content: { introduction: "Won't run out!", mainContent: "Solar, wind, hydro clean.", interactive: { type: "energy-comparison", sources: [] }, quiz: { question: "Which renewable?", options: ["Coal", "Gas", "Solar", "Nuclear"], correct: 2, explanation: "Solar renewable." } } }, { id: "materials-science", title: "üß™ Materials Science", description: "Properties of materials", content: { introduction: "Study material properties!", mainContent: "Strength, hardness, conductivity, malleability.", interactive: { type: "material-tester", samples: [] }, quiz: { question: "Copper property?", options: ["Insulator", "Conductor", "Brittle", "Weak"], correct: 1, explanation: "Copper conducts electricity." } } }, { id: "strength-testing", title: "üí™ Strength Testing", description: "Testing material limits", content: { introduction: "How much can it handle?", mainContent: "Tensile, compression, shear, torsion tests.", interactive: { type: "strength-tester", materials: [] }, quiz: { question: "Tensile test measures?", options: ["Compression", "Stretching", "Twisting", "Bending"], correct: 1, explanation: "Tensile = pulling/stretching." } } }]
            },
            10: {
                science: [{ id: "evolution", title: "ü¶ñ Evolution", description: "Species change", content: { introduction: "Evolution diversity!", mainContent: "Natural selection drives evolution.", interactive: { type: "evolution-simulator", concepts: [] }, quiz: { question: "What provides variation?", options: ["Diet", "Exercise", "Mutations", "Learning"], correct: 2, explanation: "Mutations vary." } } }, { id: "nuclear-chem", title: "‚ò¢Ô∏è Nuclear Chemistry", description: "Atoms and radioactivity", content: { introduction: "Nuclear reactions!", mainContent: "Fission splits, fusion combines. Radioactive decay.", interactive: { type: "nuclear-sim", reactions: [] }, quiz: { question: "Fusion or fission in Sun?", options: ["Fission", "Fusion", "Both", "Neither"], correct: 1, explanation: "Sun fuses hydrogen." } } }, { id: "em-spectrum", title: "üåà EM Spectrum", description: "Electromagnetic waves", content: { introduction: "Light is waves!", mainContent: "Radio, micro, IR, visible, UV, X-ray, gamma.", interactive: { type: "spectrum-explorer", waves: [] }, quiz: { question: "Highest energy?", options: ["Radio", "Visible", "UV", "Gamma"], correct: 3, explanation: "Gamma highest energy." } } }],
                mathematics: [{ id: "trigonometry", title: "üìê Trigonometry", description: "Triangles", content: { introduction: "Angles and sides!", mainContent: "SOH-CAH-TOA.", interactive: { type: "trig-calculator", ratios: [] }, quiz: { question: "TOA is?", options: ["sin", "cos", "tan=opp/adj", "tan=adj/opp"], correct: 2, explanation: "TOA: Tan=Opp/Adj." } } }, { id: "exponential", title: "üìà Exponential Functions", description: "Growth and decay", content: { introduction: "Rapid growth/decay!", mainContent: "f(x)=a¬∑bÀ£. Population, compound interest.", interactive: { type: "exp-grapher", functions: [] }, quiz: { question: "2¬≥=?", options: ["6", "8", "9", "16"], correct: 1, explanation: "2¬≥=2√ó2√ó2=8." } } }, { id: "logarithms", title: "üìä Logarithms", description: "Inverse of exponential", content: { introduction: "Undo exponentials!", mainContent: "log·µá(x)=y means b ∏=x.", interactive: { type: "log-calculator", problems: [] }, quiz: { question: "log‚ÇÅ‚ÇÄ(100)=?", options: ["1", "2", "10", "100"], correct: 1, explanation: "10¬≤=100." } } }],
                technology: [{ id: "data-structures", title: "üì¶ Data Structures", description: "Organizing data", content: { introduction: "Organize info!", mainContent: "Arrays, stacks, queues, trees.", interactive: { type: "structure-visualizer", structures: [] }, quiz: { question: "LIFO structure?", options: ["Array", "Queue", "Stack", "Tree"], correct: 2, explanation: "Stack: Last-In-First-Out." } } }, { id: "oop", title: "üéØ OOP", description: "Object-oriented programming", content: { introduction: "Objects and classes!", mainContent: "Encapsulation, inheritance, polymorphism.", interactive: { type: "oop-demo", examples: [] }, quiz: { question: "Inherit from parent?", options: ["Encapsulation", "Inheritance", "Polymorphism", "Abstraction"], correct: 1, explanation: "Inheritance from parent." } } }, { id: "apis", title: "üîå APIs", description: "Application interfaces", content: { introduction: "Programs communicate!", mainContent: "REST APIs, GET/POST requests, JSON.", interactive: { type: "api-tester", endpoints: [] }, quiz: { question: "GET request does?", options: ["Create", "Retrieve", "Update", "Delete"], correct: 1, explanation: "GET retrieves data." } } }],
                engineering: [{ id: "robotics", title: "ü§ñ Robotics", description: "Autonomous machines", content: { introduction: "Mechanics and programming!", mainContent: "Sensors, controllers, actuators.", interactive: { type: "robot-builder", components: [] }, quiz: { question: "Detects obstacles?", options: ["Actuator", "Sensor", "Controller", "Motor"], correct: 1, explanation: "Sensors detect." } } }, { id: "3d-printing", title: "üñ®Ô∏è 3D Printing", description: "Additive manufacturing", content: { introduction: "Build layer by layer!", mainContent: "FDM, SLA, SLS technologies. Design to reality.", interactive: { type: "3d-printer-sim", models: [] }, quiz: { question: "3D printing is?", options: ["Subtractive", "Additive", "Formative", "Destructive"], correct: 1, explanation: "Adds material layer-by-layer." } } }, { id: "cad-design", title: "‚úèÔ∏è CAD Design", description: "Computer-aided design", content: { introduction: "Design on computers!", mainContent: "3D modeling, parametric design, simulations.", interactive: { type: "cad-editor", tools: [] }, quiz: { question: "CAD used for?", options: ["Gaming", "Design", "Email", "Video"], correct: 1, explanation: "CAD for design." } } }]
            },
            11: {
                science: [{ id: "organic-chem", title: "‚öóÔ∏è Organic Chemistry", description: "Carbon compounds", content: { introduction: "Organic studies carbon!", mainContent: "Carbon forms 4 bonds.", interactive: { type: "molecule-builder", categories: [] }, quiz: { question: "Carbon bonds?", options: ["2", "3", "4", "5"], correct: 2, explanation: "Carbon forms 4." } } }, { id: "stoichiometry", title: "‚öñÔ∏è Stoichiometry", description: "Chemical calculations", content: { introduction: "Counting atoms!", mainContent: "Moles, balanced equations, limiting reactants.", interactive: { type: "stoich-calculator", reactions: [] }, quiz: { question: "Mole unit for?", options: ["Mass", "Volume", "Amount", "Temperature"], correct: 2, explanation: "Mole measures amount." } } }, { id: "wave-particle", title: "‚öõÔ∏è Wave-Particle", description: "Quantum duality", content: { introduction: "Light is both!", mainContent: "Photons show wave and particle properties.", interactive: { type: "quantum-demo", experiments: [] }, quiz: { question: "Light behaves as?", options: ["Only wave", "Only particle", "Both", "Neither"], correct: 2, explanation: "Wave-particle duality." } } }],
                mathematics: [{ id: "calculus", title: "‚à´ Calculus", description: "Rates and areas", content: { introduction: "Math of change!", mainContent: "Derivatives, integrals.", interactive: { type: "calculus-visualizer", operations: [] }, quiz: { question: "Derivative of x¬≤?", options: ["x", "2x", "x¬≤/2", "2"], correct: 1, explanation: "d/dx(x¬≤)=2x." } } }, { id: "limits", title: "‚àû Limits", description: "Approaching values", content: { introduction: "What value approaches!", mainContent: "lim as x‚Üía. Foundation of calculus.", interactive: { type: "limit-visualizer", functions: [] }, quiz: { question: "lim(x‚Üí‚àû) 1/x=?", options: ["0", "1", "‚àû", "Undefined"], correct: 0, explanation: "Approaches 0." } } }, { id: "derivatives-app", title: "üìâ Derivatives Applications", description: "Real-world calculus", content: { introduction: "Calculus in action!", mainContent: "Optimization, related rates, motion.", interactive: { type: "derivative-app", scenarios: [] }, quiz: { question: "derivative gives?", options: ["Area", "Rate of change", "Volume", "Angle"], correct: 1, explanation: "Derivatives = rates." } } }],
                technology: [{ id: "ml-intro", title: "üß† Machine Learning", description: "Teaching computers", content: { introduction: "ML learns from data!", mainContent: "Supervised, unsupervised, reinforcement.", interactive: { type: "ml-explorer", types: [] }, quiz: { question: "Labeled data?", options: ["Supervised", "Unsupervised", "Reinforcement", "Transfer"], correct: 0, explanation: "Supervised uses labels." } } }, { id: "neural-networks", title: "üß∏ Neural Networks", description: "Brain-inspired AI", content: { introduction: "Mimics neurons!", mainContent: "Layers, weights, activation functions, backprop.", interactive: { type: "nn-builder", layers: [] }, quiz: { question: "NN inspired by?", options: ["Computers", "Brain", "Physics", "Math"], correct: 1, explanation: "Brain-inspired." } } }, { id: "deep-learning", title: "üîç Deep Learning", description: "Advanced ML", content: { introduction: "Deep neural networks!", mainContent: "CNNs for images, RNNs for sequences.", interactive: { type: "dl-demo", applications: [] }, quiz: { question: "CNN good for?", options: ["Text", "Images", "Sound", "All"], correct: 1, explanation: "CNNs excel at images." } } }],
                engineering: [{ id: "aerospace", title: "‚úàÔ∏è Aerospace", description: "Flight and space", content: { introduction: "Aircraft and spacecraft!", mainContent: "4 forces: lift, weight, thrust, drag.", interactive: { type: "flight-simulator", concepts: [] }, quiz: { question: "Creates lift?", options: ["Weight", "Thrust", "Bernoulli", "Gravity"], correct: 2, explanation: "Bernoulli creates lift." } } }, { id: "control-systems", title: "üéÆ Control Systems", description: "Automation and feedback", content: { introduction: "Control processes!", mainContent: "Open-loop, closed-loop, PID controllers.", interactive: { type: "control-demo", systems: [] }, quiz: { question: "Closed-loop uses?", options: ["No feedback", "Feedback", "Manual", "Random"], correct: 1, explanation: "Closed-loop has feedback." } } }, { id: "feedback-loops", title: "üîÅ Feedback Loops", description: "Self-regulating systems", content: { introduction: "Output affects input!", mainContent: "Positive and negative feedback in nature/engineering.", interactive: { type: "feedback-sim", examples: [] }, quiz: { question: "Thermostat uses?", options: ["Positive feedback", "Negative feedback", "No feedback", "Both"], correct: 1, explanation: "Negative stabilizes." } } }]
            },
            12: {
                science: [{ id: "quantum", title: "‚öõÔ∏è Quantum Physics", description: "Physics of small", content: { introduction: "Quantum amazing!", mainContent: "Wave-particle duality, uncertainty.", interactive: { type: "quantum-explorer", principles: [] }, quiz: { question: "Wave-particle duality?", options: ["Waves are particles", "Light is both", "Only waves", "Only particles"], correct: 1, explanation: "Light has both." } } }, { id: "relativity", title: "üåå Relativity", description: "Einstein's theories", content: { introduction: "Space and time!", mainContent: "Special relativity: E=mc¬≤. General: gravity curves spacetime.", interactive: { type: "relativity-sim", concepts: [] }, quiz: { question: "E=mc¬≤ means?", options: ["Energy=mass", "Energy=mass√óspeed¬≤", "E=momentum", "Error"], correct: 1, explanation: "Energy-mass equivalence." } } }, { id: "molecular-bio", title: "üß¨ Molecular Biology", description: "Life at molecular level", content: { introduction: "DNA to proteins!", mainContent: "Transcription, translation, protein synthesis.", interactive: { type: "protein-builder", process: [] }, quiz: { question: "DNA to RNA?", options: ["Translation", "Transcription", "Replication", "Evolution"], correct: 1, explanation: "Transcription makes RNA." } } }],
                mathematics: [{ id: "adv-calculus", title: "‚à´‚à´ Advanced Calculus", description: "Multivariable", content: { introduction: "Multiple variables!", mainContent: "Partial derivatives, multiple integrals.", interactive: { type: "multivariable-calc", topics: [] }, quiz: { question: "‚àÇf/‚àÇx is?", options: ["Total derivative", "Partial derivative", "Integral", "Limit"], correct: 1, explanation: "Partial wrt x." } } }, { id: "integration", title: "‚à´ Integration Techniques", description: "Advanced integration", content: { introduction: "Find areas!", mainContent: "Substitution, parts, partial fractions, trig.", interactive: { type: "integration-solver", methods: [] }, quiz: { question: "‚à´x dx=?", options: ["x", "x¬≤", "x¬≤/2", "2x"], correct: 2, explanation: "Power rule: x¬≤/2." } } }, { id: "diff-equations", title: "üìà Differential Equations", description: "Equations with derivatives", content: { introduction: "Rates and change!", mainContent: "Separable, linear, systems. Models growth/decay.", interactive: { type: "de-solver", equations: [] }, quiz: { question: "DE involves?", options: ["Derivatives", "Only algebra", "Geometry", "Statistics"], correct: 0, explanation: "DEs have derivatives." } } }],
                technology: [{ id: "cloud", title: "‚òÅÔ∏è Cloud Computing", description: "Computing as service", content: { introduction: "Cloud delivers online!", mainContent: "IaaS, PaaS, SaaS models.", interactive: { type: "cloud-models", services: [] }, quiz: { question: "Ready apps?", options: ["IaaS", "PaaS", "SaaS", "FaaS"], correct: 2, explanation: "SaaS provides apps." } } }, { id: "blockchain", title: "üîó Blockchain", description: "Distributed ledger", content: { introduction: "Decentralized records!", mainContent: "Blocks, hash, consensus, cryptocurrency.", interactive: { type: "blockchain-demo", blocks: [] }, quiz: { question: "Blockchain is?", options: ["Centralized", "Decentralized", "Single server", "Temporary"], correct: 1, explanation: "Distributed, decentralized." } } }, { id: "cryptography", title: "üîê Cryptography", description: "Secure communication", content: { introduction: "Secret messages!", mainContent: "Encryption, decryption, public/private keys.", interactive: { type: "crypto-tool", algorithms: [] }, quiz: { question: "Public key for?", options: ["Encrypt", "Decrypt", "Both", "Neither"], correct: 0, explanation: "Public encrypts, private decrypts." } } }],
                engineering: [{ id: "nanotech", title: "üî¨ Nanotechnology", description: "Atomic scale", content: { introduction: "Nanoscale!", mainContent: "Unique properties at nanoscale.", interactive: { type: "nano-explorer", applications: [] }, quiz: { question: "Nanometers in meter?", options: ["1,000", "1,000,000", "1,000,000,000", "1,000,000,000,000"], correct: 2, explanation: "Billion nanometers." } } }, { id: "quantum-computing", title: "‚öõÔ∏è Quantum Computing", description: "Qubits and superposition", content: { introduction: "Beyond binary!", mainContent: "Qubits, superposition, entanglement, quantum gates.", interactive: { type: "qubit-sim", gates: [] }, quiz: { question: "Qubit can be?", options: ["Only 0", "Only 1", "0 and 1 simultaneously", "Neither"], correct: 2, explanation: "Superposition: both states." } } }, { id: "superconductors", title: "‚ö° Superconductors", description: "Zero resistance", content: { introduction: "Perfect conductors!", mainContent: "Zero electrical resistance at low temperatures. Mag levitation.", interactive: { type: "supercon-demo", materials: [] }, quiz: { question: "Superconductor has?", options: ["High resistance", "Zero resistance", "Variable", "Infinite"], correct: 1, explanation: "Zero electrical resistance." } } }]
            }
        };

        // STEM Questions Database
        const stemQuestions = {
            6: {
                science: [
                    {
                        question: "What is the process by which plants make their own food?",
                        options: ["Respiration", "Photosynthesis", "Digestion", "Fermentation"],
                        correct: 1,
                        explanation: "Photosynthesis is how plants convert sunlight into energy."
                    },
                    {
                        question: "Which planet is closest to the Sun?",
                        options: ["Venus", "Earth", "Mercury", "Mars"],
                        correct: 2,
                        explanation: "Mercury is the closest planet to the Sun in our solar system."
                    },
                    {
                        question: "What is the chemical symbol for water?",
                        options: ["H2O", "CO2", "NaCl", "O2"],
                        correct: 0,
                        explanation: "Water is made of two hydrogen atoms and one oxygen atom (H2O)."
                    }
                ],
                mathematics: [
                    {
                        question: "What is 15 + 27?",
                        options: ["40", "42", "41", "43"],
                        correct: 1,
                        explanation: "15 + 27 = 42"
                    },
                    {
                        question: "What is the area of a rectangle with length 8 and width 5?",
                        options: ["13", "26", "40", "35"],
                        correct: 2,
                        explanation: "Area = length √ó width = 8 √ó 5 = 40"
                    },
                    {
                        question: "What is 6 √ó 7?",
                        options: ["42", "36", "48", "49"],
                        correct: 0,
                        explanation: "6 √ó 7 = 42"
                    }
                ],
                technology: [
                    {
                        question: "What does CPU stand for?",
                        options: ["Central Processing Unit", "Computer Processing Unit", "Central Program Unit", "Computer Program Unit"],
                        correct: 0,
                        explanation: "CPU stands for Central Processing Unit, the brain of the computer."
                    },
                    {
                        question: "What is the main purpose of RAM in a computer?",
                        options: ["Long-term storage", "Temporary storage", "Display graphics", "Connect to internet"],
                        correct: 1,
                        explanation: "RAM provides temporary storage for data the computer is actively using."
                    },
                    {
                        question: "What does 'www' stand for in a website address?",
                        options: ["World Wide Web", "World Web Wide", "Wide World Web", "Web World Wide"],
                        correct: 0,
                        explanation: "WWW stands for World Wide Web, the global information system."
                    }
                ],
                engineering: [
                    {
                        question: "What is the main purpose of a bridge?",
                        options: ["To store water", "To cross obstacles", "To generate electricity", "To provide shelter"],
                        correct: 1,
                        explanation: "Bridges are designed to help people and vehicles cross obstacles like rivers or valleys."
                    },
                    {
                        question: "What type of engineer designs buildings?",
                        options: ["Mechanical engineer", "Civil engineer", "Electrical engineer", "Chemical engineer"],
                        correct: 1,
                        explanation: "Civil engineers design and construct buildings, bridges, and infrastructure."
                    },
                    {
                        question: "What is the strongest shape used in construction?",
                        options: ["Circle", "Triangle", "Square", "Rectangle"],
                        correct: 1,
                        explanation: "Triangles are the strongest shape because they distribute force evenly."
                    }
                ]
            }
            ,
            7: {
                science: [
                    { question: "What is the powerhouse of the cell?", options: ["Nucleus", "Mitochondria", "Cell Membrane", "Ribosome"], correct: 1, explanation: "Mitochondria produce energy (ATP) for the cell." },
                    { question: "What do producers do in an ecosystem?", options: ["Eat plants", "Make their own food", "Decompose matter", "Hunt prey"], correct: 1, explanation: "Producers (plants) make food through photosynthesis." },
                    { question: "What happens to energy in transformations?", options: ["It's destroyed", "It changes form", "It disappears", "It multiplies"], correct: 1, explanation: "Energy changes form but total energy stays constant." }
                ],
                mathematics: [
                    { question: "What is -8 + 5?", options: ["-13", "-3", "3", "13"], correct: 1, explanation: "When adding integers with different signs, subtract and use the sign of the larger number." },
                    { question: "If the ratio is 2:3 and the first number is 4, what's the second?", options: ["5", "6", "7", "8"], correct: 1, explanation: "2:3 = 4:x, so x = 6" },
                    { question: "What is 25% of 80?", options: ["15", "20", "25", "30"], correct: 1, explanation: "25% = 0.25, so 0.25 ÔøΩ 80 = 20" }
                ],
                technology: [
                    { question: "What does DNS stand for?", options: ["Domain Name System", "Digital Network Service", "Data Network Server", "Domain Name Service"], correct: 0, explanation: "DNS translates domain names to IP addresses." },
                    { question: "What does =SUM(A1:A5) do in a spreadsheet?", options: ["Deletes cells", "Adds cells A1 through A5", "Multiplies", "Sorts data"], correct: 1, explanation: "SUM function adds all numbers in the range." },
                    { question: "Which graph shows data over time best?", options: ["Pie chart", "Bar chart", "Line graph", "Table"], correct: 2, explanation: "Line graphs excel at showing trends over time." }
                ],
                engineering: [
                    { question: "Which bridge type is best for long spans?", options: ["Beam", "Arch", "Suspension", "Truss"], correct: 2, explanation: "Suspension bridges are ideal for long distances." },
                    { question: "What class lever is a seesaw?", options: ["First class", "Second class", "Third class", "Not a lever"], correct: 0, explanation: "Seesaw is first class - fulcrum in the middle." },
                    { question: "If MA (Mechanical Advantage) is 4, what does it mean?", options: ["Use 4x more force", "Lift 4x the weight with same force", "Move 4x faster", "No advantage"], correct: 1, explanation: "MA of 4 means you can lift 4 times the weight." }
                ]
            },
            8: {
                science: [
                    { question: "What is Newton's 3rd Law?", options: ["Equal and opposite reaction", "F=ma", "Inertia", "Gravity"], correct: 0, explanation: "For every action, there's an equal and opposite reaction." },
                    { question: "Can sound travel in a vacuum?", options: ["Yes", "No", "Sometimes", "Depends on frequency"], correct: 1, explanation: "Sound needs a medium (air, water, solid) to travel." },
                    { question: "What happens when light bends in water?", options: ["Reflection", "Refraction", "Absorption", "Emission"], correct: 1, explanation: "Refraction is the bending of light when it enters a different medium." }
                ],
                mathematics: [
                    { question: "What is the slope in y = 3x + 5?", options: ["3", "5", "8", "x"], correct: 0, explanation: "In y=mx+b form, m is the slope, which is 3." },
                    { question: "What is 3ÔøΩ + 4ÔøΩ?", options: ["5", "25", "7", "12"], correct: 1, explanation: "9 + 16 = 25. Using Pythagorean theorem, c = 5." },
                    { question: "How many solutions for parallel lines?", options: ["0", "1", "2", "Infinite"], correct: 0, explanation: "Parallel lines never meet, so 0 solutions." }
                ],
                technology: [
                    { question: "What repeats code in programming?", options: ["Variables", "Loops", "Conditions", "Functions"], correct: 1, explanation: "Loops repeat code multiple times." },
                    { question: "What is TRUE AND FALSE?", options: ["TRUE", "FALSE", "ERROR", "MAYBE"], correct: 1, explanation: "Both must be TRUE for AND operation; result is FALSE." },
                    { question: "What is the output of NOT gate with input 1?", options: ["0", "1", "ERROR", "2"], correct: 0, explanation: "NOT gate inverts the input, so 1 becomes 0." }
                ],
                engineering: [
                    { question: "What happens if one bulb fails in a series circuit?", options: ["All go out", "Others stay on", "Circuit overheats", "Nothing happens"], correct: 0, explanation: "In series circuits, there's only one path, so all bulbs go out." },
                    { question: "What do wind turbines convert?", options: ["Light to heat", "Wind to electricity", "Water to power", "Solar to wind"], correct: 1, explanation: "Wind turbines convert kinetic energy from wind to electrical energy." },
                    { question: "What do hydraulics use to transmit force?", options: ["Air", "Liquid", "Vacuum", "Solid"], correct: 1, explanation: "Hydraulics use liquids to transmit pressure and force." }
                ]
            },
            9: {
                science: [
                    { question: "In genetics, what does Bb ÔøΩ Bb offspring ratio look like?", options: ["All brown", "All blue", "75% brown, 25% blue", "50-50"], correct: 2, explanation: "Using Punnett square: 3 brown (BB, Bb, Bb) and 1 blue (bb)." },
                    { question: "What is the pH of lemon juice?", options: ["2 (acid)", "7 (neutral)", "10 (base)", "14 (base)"], correct: 0, explanation: "Lemon juice is acidic with pH around 2." },
                    { question: "What is at the base of an energy pyramid?", options: ["Producers", "Herbivores", "Carnivores", "Decomposers"], correct: 0, explanation: "Producers (plants) are at the bottom of the energy pyramid." }
                ],
                mathematics: [
                    { question: "What shape does a quadratic equation graph form?", options: ["Line", "Parabola", "Circle", "Hyperbola"], correct: 1, explanation: "Quadratic equations form U-shaped parabolas." },
                    { question: "If f(x) = 2x + 1, what is f(3)?", options: ["5", "6", "7", "8"], correct: 2, explanation: "f(3) = 2(3) + 1 = 6 + 1 = 7" },
                    { question: "What is (x+2)(x+3)?", options: ["xÔøΩ+5", "xÔøΩ+5x+6", "xÔøΩ+6", "2x+5"], correct: 1, explanation: "Using FOIL method: xÔøΩ + 3x + 2x + 6 = xÔøΩ + 5x + 6" }
                ],
                technology: [
                    { question: "Which language adds interactivity to websites?", options: ["HTML", "CSS", "JavaScript", "Python"], correct: 2, explanation: "JavaScript adds behavior and interactivity to web pages." },
                    { question: "Why use functions in programming?", options: ["Slower code", "Reuse code", "More errors", "Harder to read"], correct: 1, explanation: "Functions enable code reuse and better organization." },
                    { question: "How do you get an element by ID in JavaScript?", options: ["getElement", "getElementById", "find Element", "selectId"], correct: 1, explanation: "Use document.getElementById() to select elements by ID." }
                ],
                engineering: [
                    { question: "Which energy source is renewable?", options: ["Coal", "Natural Gas", "Solar", "Nuclear"], correct: 2, explanation: "Solar energy is renewable and won't run out." },
                    { question: "What is copper's main property for electrical use?", options: ["Insulator", "Conductor", "Brittle", "Weak"], correct: 1, explanation: "Copper is an excellent conductor of electricity." },
                    { question: "What does a tensile test measure?", options: ["Compression", "Stretching/pulling", "Twisting", "Bending"], correct: 1, explanation: "Tensile tests measure how materials respond to pulling forces." }
                ]
            },
            10: {
                science: [
                    { question: "What provides genetic variation in evolution?", options: ["Diet", "Exercise", "Mutations", "Learning"], correct: 2, explanation: "Mutations in DNA provide the variation needed for evolution." },
                    { question: "Does the Sun use fusion or fission?", options: ["Fission", "Fusion", "Both", "Neither"], correct: 1, explanation: "The Sun fuses hydrogen atoms to create energy." },
                    { question: "Which has the highest energy in EM spectrum?", options: ["Radio waves", "Visible light", "UV rays", "Gamma rays"], correct: 3, explanation: "Gamma rays have the highest energy and frequency." }
                ],
                mathematics: [
                    { question: "In trigonometry, what does TOA represent?", options: ["sin = opp/hyp", "cos = adj/hyp", "tan = opp/adj", "tan = adj/opp"], correct: 2, explanation: "TOA stands for Tangent = Opposite / Adjacent" },
                    { question: "What is 2ÔøΩ?", options: ["6", "8", "9", "16"], correct: 1, explanation: "2ÔøΩ = 2 ÔøΩ 2 ÔøΩ 2 = 8" },
                    { question: "What is log10(100)?", options: ["1", "2", "10", "100"], correct: 1, explanation: "log10(100) = 2 because 10ÔøΩ = 100" }
                ],
                technology: [
                    { question: "Which data structure is LIFO (Last-In-First-Out)?", options: ["Array", "Queue", "Stack", "Tree"], correct: 2, explanation: "Stack uses LIFO: last item added is first removed." },
                    { question: "What OOP principle allows inheriting from parent class?", options: ["Encapsulation", "Inheritance", "Polymorphism", "Abstraction"], correct: 1, explanation: "Inheritance allows child classes to inherit from parents." },
                    { question: "What does a GET request do in APIs?", options: ["Create data", "Retrieve data", "Update data", "Delete data"], correct: 1, explanation: "GET requests retrieve/fetch data from a server." }
                ],
                engineering: [
                    { question: "What detects obstacles in robotics?", options: ["Actuator", "Sensor", "Controller", "Motor"], correct: 1, explanation: "Sensors detect environmental conditions like obstacles." },
                    { question: "What type of manufacturing is 3D printing?", options: ["Subtractive", "Additive", "Formative", "Destructive"], correct: 1, explanation: "3D printing is additive - builds layer by layer." },
                    { question: "What is CAD primarily used for?", options: ["Gaming", "Design", "Email", "Video editing"], correct: 1, explanation: "CAD (Computer-Aided Design) is used for design work." }
                ]
            },
            11: {
                science: [
                    { question: "How many bonds does carbon form?", options: ["2", "3", "4", "5"], correct: 2, explanation: "Carbon always forms 4 covalent bonds." },
                    { question: "What is the mole unit used for?", options: ["Mass", "Volume", "Amount of substance", "Temperature"], correct: 2, explanation: "Mole measures the amount of substance (6.02ÔøΩ10ÔøΩÔøΩ particles)." },
                    { question: "How does light behave?", options: ["Only as a wave", "Only as a particle", "Both wave and particle", "Neither"], correct: 2, explanation: "Light exhibits wave-particle duality." }
                ],
                mathematics: [
                    { question: "What is the derivative of xÔøΩ?", options: ["x", "2x", "xÔøΩ/2", "2"], correct: 1, explanation: "Using power rule: d/dx(xÔøΩ) = 2x" },
                    { question: "What is the limit as x?8 of 1/x?", options: ["0", "1", "8", "Undefined"], correct: 0, explanation: "As x gets infinitely large, 1/x approaches 0." },
                    { question: "What does a derivative give you?", options: ["Area under curve", "Rate of change", "Volume", "Angle measure"], correct: 1, explanation: "Derivatives represent rates of change/slopes." }
                ],
                technology: [
                    { question: "Which ML type uses labeled data?", options: ["Supervised learning", "Unsupervised learning", "Reinforcement learning", "Transfer learning"], correct: 0, explanation: "Supervised learning uses labeled training data." },
                    { question: "What are neural networks inspired by?", options: ["Computers", "Human brain", "Physics", "Mathematics"], correct: 1, explanation: "Neural networks mimic the structure of biological neurons." },
                    { question: "What are CNNs particularly good for?", options: ["Text processing", "Image recognition", "Sound analysis", "All equally"], correct: 1, explanation: "CNNs (Convolutional Neural Networks) excel at image tasks." }
                ],
                engineering: [
                    { question: "What creates lift in aircraft according to physics?", options: ["Weight", "Thrust", "Bernoulli's principle", "Gravity"], correct: 2, explanation: "Bernoulli's principle explains how wings create lift." },
                    { question: "What type of feedback does a closed-loop control system use?", options: ["No feedback", "Feedback", "Manual control", "Random signals"], correct: 1, explanation: "Closed-loop systems use feedback to adjust output." },
                    { question: "What type of feedback does a thermostat use?", options: ["Positive feedback", "Negative feedback", "No feedback", "Both types"], correct: 1, explanation: "Thermostats use negative feedback to stabilize temperature." }
                ]
            },
            12: {
                science: [
                    { question: "What does wave-particle duality describe?", options: ["Waves are particles", "Light exhibits both wave and particle properties", "Only waves exist", "Only particles exist"], correct: 1, explanation: "Light and matter exhibit both wave and particle characteristics." },
                    { question: "What does E=mcÔøΩ mean?", options: ["Energy equals mass", "Energy equals mass times speed of light squared", "Energy equals momentum", "It's an error"], correct: 1, explanation: "Einstein's equation shows energy-mass equivalence." },
                    { question: "What is the process of DNA to RNA called?", options: ["Translation", "Transcription", "Replication", "Evolution"], correct: 1, explanation: "Transcription converts DNA information to RNA." }
                ],
                mathematics: [
                    { question: "What is ?f/?x called?", options: ["Total derivative", "Partial derivative", "Integral", "Limit"], correct: 1, explanation: "?f/?x is the partial derivative with respect to x." },
                    { question: "What is the integral ?x dx?", options: ["x", "xÔøΩ", "xÔøΩ/2 + C", "2x"], correct: 2, explanation: "Using power rule for integration: xÔøΩ/2 + C" },
                    { question: "What do differential equations involve?", options: ["Derivatives", "Only algebra", "Only geometry", "Only statistics"], correct: 0, explanation: "Differential equations contain derivatives of functions." }
                ],
                technology: [
                    { question: "Which cloud model provides ready-to-use applications?", options: ["IaaS", "PaaS", "SaaS", "FaaS"], correct: 2, explanation: "SaaS (Software as a Service) provides ready applications." },
                    { question: "Is blockchain centralized or decentralized?", options: ["Centralized", "Decentralized", "Single server", "Temporary storage"], correct: 1, explanation: "Blockchain is distributed and decentralized." },
                    { question: "What is a public key used for in cryptography?", options: ["Encrypt messages", "Decrypt messages", "Both encrypt and decrypt", "Neither"], correct: 0, explanation: "Public key encrypts; private key decrypts." }
                ],
                engineering: [
                    { question: "How many nanometers are in a meter?", options: ["1,000", "1,000,000", "1,000,000,000", "1,000,000,000,000"], correct: 2, explanation: "There are one billion (10?) nanometers in a meter." },
                    { question: "What can a qubit be in quantum computing?", options: ["Only 0", "Only 1", "0 and 1 simultaneously (superposition)", "Neither 0 nor 1"], correct: 2, explanation: "Qubits can exist in superposition of both 0 and 1." },
                    { question: "What resistance do superconductors have?", options: ["High resistance", "Zero resistance", "Variable resistance", "Infinite resistance"], correct: 1, explanation: "Superconductors have zero electrical resistance at low temperatures." }
                ]
            }
        };

        // Always fetch fresh dynamic questions from server when starting a quiz
        async function fetchDynamicQuestions(grade, subject) {
            try {
                const res = await fetch(`/api/questions?grade=${encodeURIComponent(grade)}&subject=${encodeURIComponent(subject)}`);
                if (!res.ok) return [];
                const data = await res.json();
                // Normalize to same structure used by stemQuestions
                return (data || []).map(q => ({
                    question: q.question,
                    options: q.options,
                    correct: q.correct,
                    explanation: q.explanation || ''
                }));
            } catch (e) {
                return [];
            }
        }

        async function logActivity(entry) {
            try {
                await fetch('/api/activity', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(entry)
                });
            } catch (e) {
                // ignore
            }
        }

        // Application State
        let currentGrade = null;
        let currentSubject = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let timeLeft = 30;
        let timer = null;
        let selectedAnswer = null;
        let startTime = null;
        let currentCardIndex = 0;
        let isCardFlipped = false;
        // Module state
        let currentModule = null;
        let currentModuleSection = 0; // 0: intro, 1: main, 2: interactive, 3: quiz
        let moduleQuizAnswer = null;
        // Shooter state
        let shooterState = {
            running: false,
            score: 0,
            lives: 3,
            playerX: 450,
            bullets: [], // {x, y, vy}
            answers: [], // {x, y, vy, value, isCorrect}
            problem: { a: 1, b: 1, op: '+', correct: 2 },
            keys: {}
        };
        // Crossword state
        let crosswordState = {
            gridSize: 10,
            cells: [], // [{row,col,letter,black,inputEl,number}]
            clues: { across: [], down: [] },
            answers: {}, // key by id => uppercase answer
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function () {
            initializeEventListeners();
            initRewards();
        });

        function initializeEventListeners() {
            // Grade button functionality
            const gradeButtons = document.querySelectorAll('.grade-btn');
            gradeButtons.forEach(button => {
                button.addEventListener('click', function () {
                    selectGrade(parseInt(this.getAttribute('data-grade')));
                });
            });

            // Subject selection
            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    selectSubject(this.getAttribute('data-subject'));
                });
            });

            // Flashcards start buttons
            document.querySelectorAll('.flashcards-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    selectSubjectForFlashcards(this.getAttribute('data-subject'));
                });
            });

            // Modules start buttons
            document.querySelectorAll('.modules-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    selectSubjectForModules(this.getAttribute('data-subject'));
                });
            });

            // Chem lab start
            document.querySelectorAll('.chem-lab-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    if (!currentGrade) {
                        alert('Please select a grade first.');
                        return;
                    }
                    openChemLab();
                });
            });

            // Shooter start (only for mathematics)
            document.querySelectorAll('.shooter-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    if (!currentGrade) {
                        alert('Please select a grade first.');
                        return;
                    }
                    startShooter();
                });
            });

            // Crossword start
            document.querySelectorAll('.crossword-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    if (!currentGrade) {
                        alert('Please select a grade first.');
                        return;
                    }
                    selectSubjectForCrossword(this.getAttribute('data-subject'));
                });
            });

            // Navigation buttons
            document.getElementById('back-to-grades').addEventListener('click', showWelcomeScreen);
            document.getElementById('back-to-subjects').addEventListener('click', showSubjectSelection);
            document.getElementById('back-to-subjects-from-flashcards').addEventListener('click', showSubjectSelection);
            document.getElementById('back-to-subjects-from-shooter').addEventListener('click', stopShooterAndBack);
            document.getElementById('back-to-subjects-from-crossword').addEventListener('click', showSubjectSelection);
            document.getElementById('back-to-subjects-from-modules').addEventListener('click', showSubjectSelection);
            document.getElementById('back-to-subjects-from-chem').addEventListener('click', showSubjectSelection);
            document.getElementById('back-to-modules').addEventListener('click', showModulesScreen);
            document.getElementById('retry-quiz').addEventListener('click', startQuiz);
            document.getElementById('new-subject').addEventListener('click', showSubjectSelection);
            document.getElementById('new-grade').addEventListener('click', showWelcomeScreen);

            // Quiz controls
            document.getElementById('next-question').addEventListener('click', nextQuestion);
            document.getElementById('submit-quiz').addEventListener('click', submitQuiz);

            // Flashcards controls
            document.getElementById('flip-card').addEventListener('click', flipFlashcard);
            document.getElementById('next-card').addEventListener('click', nextCard);
            document.getElementById('prev-card').addEventListener('click', prevCard);

            // Module controls
            document.getElementById('next-section').addEventListener('click', nextModuleSection);
            document.getElementById('prev-section').addEventListener('click', prevModuleSection);
            document.getElementById('module-quiz-btn').addEventListener('click', startModuleQuiz);
            document.getElementById('crossword-check').addEventListener('click', checkCrossword);
            document.getElementById('chem-mix').addEventListener('click', mixChemicals);
            document.getElementById('chem-clear').addEventListener('click', clearChemLab);

            // Shooter controls
            window.addEventListener('keydown', (e) => {
                shooterState.keys[e.key.toLowerCase()] = true;
                if (e.code === 'Space') {
                    e.preventDefault();
                    shootBullet();
                }
            });
            window.addEventListener('keyup', (e) => {
                shooterState.keys[e.key.toLowerCase()] = false;
            });
        }

        function selectGrade(grade) {
            // Remove selected class from all buttons
            const gradeButtons = document.querySelectorAll('.grade-btn');
            gradeButtons.forEach(btn => btn.classList.remove('selected'));

            // Add selected class to clicked button
            event.target.classList.add('selected');

            currentGrade = grade;
            showSubjectSelection();
        }

        function showSubjectSelection() {
            // Update grade display
            document.getElementById('selected-grade').textContent = currentGrade;

            // Show subject selection, hide others
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'block';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
        }

        function selectSubject(subject) {
            currentSubject = subject;
            startQuiz();
        }

        function selectSubjectForFlashcards(subject) {
            currentSubject = subject;
            startFlashcards();
        }

        async function startQuiz() {
            if (!currentGrade || !currentSubject || !stemQuestions[currentGrade] || !stemQuestions[currentGrade][currentSubject]) {
                alert('Please select a valid grade and subject.');
                return;
            }

            // Reset quiz state
            currentQuestionIndex = 0;
            score = 0;
            timeLeft = 30;
            selectedAnswer = null;
            startTime = Date.now();

            // Merge dynamic questions from server for the selected grade/subject
            const base = stemQuestions[currentGrade][currentSubject] || [];
            const extra = await fetchDynamicQuestions(currentGrade, currentSubject);
            const merged = [...base, ...extra];
            if (!merged.length) {
                alert('No questions available for this selection yet.');
                return;
            }

            // Update UI
            document.getElementById('quiz-grade').textContent = currentGrade;
            document.getElementById('quiz-subject').textContent = currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1);
            document.getElementById('total-qs').textContent = merged.length;
            document.getElementById('max-score').textContent = merged.length;

            // Show quiz screen, hide others
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
            document.getElementById('shooter-screen').style.display = 'none';

            // Stash merged questions on state for loader to use
            window.__currentQuestions = merged;

            // Log start activity
            logActivity({ grade: currentGrade, subject: currentSubject, action: 'quiz_started' });

            // Load first question
            loadQuestion();
        }

        function startFlashcards() {
            if (!currentGrade || !currentSubject || !stemQuestions[currentGrade] || !stemQuestions[currentGrade][currentSubject]) {
                alert('Please select a valid grade and subject.');
                return;
            }

            currentCardIndex = 0;
            isCardFlipped = false;

            document.getElementById('flashcards-grade').textContent = currentGrade;
            document.getElementById('flashcards-subject').textContent = currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1);
            document.getElementById('total-cards').textContent = stemQuestions[currentGrade][currentSubject].length;

            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'block';

            renderFlashcard();
        }

        function renderFlashcard() {
            const cards = stemQuestions[currentGrade][currentSubject];
            const card = cards[currentCardIndex];

            document.getElementById('current-card').textContent = currentCardIndex + 1;

            const front = document.getElementById('flashcard-front');
            const back = document.getElementById('flashcard-back');
            front.textContent = card.question;
            back.innerHTML = `<strong>Answer:</strong> ${card.options[card.correct]}<br/><em>${card.explanation || ''}</em>`;

            // reset flip state
            isCardFlipped = false;
            document.getElementById('flashcard-inner').classList.remove('flipped');
        }

        function flipFlashcard() {
            isCardFlipped = !isCardFlipped;
            const inner = document.getElementById('flashcard-inner');
            if (isCardFlipped) {
                inner.classList.add('flipped');
            } else {
                inner.classList.remove('flipped');
            }
        }

        function nextCard() {
            const cards = stemQuestions[currentGrade][currentSubject];
            if (currentCardIndex < cards.length - 1) {
                currentCardIndex++;
                renderFlashcard();
            }
        }

        function prevCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                renderFlashcard();
            }
        }

        function loadQuestion() {
            const questions = window.__currentQuestions || stemQuestions[currentGrade][currentSubject];
            const question = questions[currentQuestionIndex];

            // Update progress
            document.getElementById('current-q').textContent = currentQuestionIndex + 1;
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';

            // Update question text
            document.getElementById('question-text').textContent = question.question;

            // Clear and populate options
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option;
                button.addEventListener('click', () => selectOption(index, button));
                optionsContainer.appendChild(button);
            });

            // Reset controls
            document.getElementById('next-question').disabled = true;
            document.getElementById('next-question').style.display = 'inline-block';
            document.getElementById('submit-quiz').style.display = 'none';
            selectedAnswer = null;

            // Start timer
            startTimer();
        }

        function selectOption(optionIndex, buttonElement) {
            // Remove previous selection
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });

            // Select current option
            buttonElement.classList.add('selected');
            selectedAnswer = optionIndex;

            // Enable next button
            document.getElementById('next-question').disabled = false;
        }

        function startTimer() {
            timeLeft = 30;
            document.getElementById('timer').textContent = timeLeft;
            document.getElementById('timer').classList.remove('timer-warning');

            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;

                // Warning when time is running low
                if (timeLeft <= 10) {
                    document.getElementById('timer').classList.add('timer-warning');
                }

                // Time's up
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timeUp();
                }
            }, 1000);
        }

        function timeUp() {
            // Show correct answer
            showCorrectAnswer();

            // Disable option selection
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.style.pointerEvents = 'none';
            });

            // Show next/submit button
            const questions = stemQuestions[currentGrade][currentSubject];
            if (currentQuestionIndex < questions.length - 1) {
                document.getElementById('next-question').disabled = false;
            } else {
                document.getElementById('submit-quiz').style.display = 'inline-block';
            }
        }

        function showCorrectAnswer() {
            const questions = stemQuestions[currentGrade][currentSubject];
            const question = questions[currentQuestionIndex];
            const correctIndex = question.correct;

            document.querySelectorAll('.option-btn').forEach((btn, index) => {
                if (index === correctIndex) {
                    btn.classList.add('correct');
                } else if (index === selectedAnswer && selectedAnswer !== correctIndex) {
                    btn.classList.add('incorrect');
                }
            });

            // Update score if correct
            if (selectedAnswer === correctIndex) {
                score++;
                document.getElementById('score').textContent = score;
            }
        }

        function nextQuestion() {
            clearInterval(timer);
            showCorrectAnswer();


            const questions = window.__currentQuestions || stemQuestions[currentGrade][currentSubject];
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                submitQuiz();
            }
        }

        function submitQuiz() {
            clearInterval(timer);
            showResults();
        }

        function showResults() {
            const questions = window.__currentQuestions || stemQuestions[currentGrade][currentSubject];
            const totalQuestions = questions.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            const timeTaken = Math.round((Date.now() - startTime) / 1000 / 60);

            // Update results
            document.getElementById('final-score').textContent = score;
            document.getElementById('percentage').textContent = percentage + '%';
            document.getElementById('time-taken').textContent = timeTaken + ' minutes';
            document.getElementById('accuracy').textContent = percentage + '%';

            // Performance feedback
            let performance = '';
            if (percentage >= 90) {
                performance = 'Outstanding! You have excellent knowledge!';
            } else if (percentage >= 80) {
                performance = 'Great job! You have good knowledge!';
            } else if (percentage >= 70) {
                performance = 'Good work! Keep studying to improve!';
            } else if (percentage >= 60) {
                performance = 'Not bad! Review the topics and try again!';
            } else {
                performance = 'Keep studying! Practice makes perfect!';
            }
            document.getElementById('performance').textContent = performance;

            // Rewards: award points and update UI
            const earned = calculatePointsEarned(score, totalQuestions, percentage);
            addPoints(earned);

            // Log completion activity
            logActivity({ grade: currentGrade, subject: currentSubject, action: 'quiz_completed', score, details: { totalQuestions, percentage, earnedPoints: earned } });

            // Show results, hide others
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'block';
        }

        // Rewards system
        const rewardTiers = [
            { threshold: 50, title: 'Bronze Pack', description: 'Unlock a bonus quiz and tips.' },
            { threshold: 100, title: 'Silver Pack', description: 'Unlock exclusive mini-game.' },
            { threshold: 200, title: 'Gold Pack', description: 'Unlock advanced learning modules.' },
            { threshold: 350, title: 'Platinum Pack', description: 'Unlock premium challenges.' }
        ];

        function getPoints() {
            return parseInt(localStorage.getItem('points') || '0', 10);
        }

        function setPoints(val) {
            localStorage.setItem('points', String(val));
            const badge = document.getElementById('points-badge');
            if (badge) badge.textContent = val;
            const current = document.getElementById('points-current');
            if (current) current.textContent = val;
            renderRewardsList();
        }

        function addPoints(delta) {
            if (!delta || delta <= 0) return;
            setPoints(getPoints() + delta);
        }

        function calculatePointsEarned(score, total, percentage) {
            // Base: 5 points per correct, bonus by percentage tiers
            let pts = score * 5;
            if (percentage >= 90) pts += 20; else if (percentage >= 75) pts += 10; else if (percentage >= 60) pts += 5;
            return pts;
        }

        function renderRewardsList() {
            const ul = document.getElementById('rewards-list');
            if (!ul) return;
            const points = getPoints();
            ul.innerHTML = '';
            rewardTiers.forEach(t => {
                const unlocked = points >= t.threshold;
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center';
                li.innerHTML = `<div><strong>${t.title}</strong><div class="text-muted small">${t.description}</div></div>
                                <span class="badge ${unlocked ? 'bg-success' : 'bg-secondary'}">${unlocked ? 'Unlocked' : t.threshold + ' pts'}</span>`;
                ul.appendChild(li);
            });
        }

        function initRewards() {
            // Initialize stored points and UI
            const existing = getPoints();
            setPoints(existing);
            // Refresh list on modal show
            const rewardsModal = document.getElementById('rewardsModal');
            if (rewardsModal) {
                rewardsModal.addEventListener('show.bs.modal', () => {
                    setPoints(getPoints());
                });
            }
        }

        function showWelcomeScreen() {
            // Reset grade selection
            const gradeButtons = document.querySelectorAll('.grade-btn');
            gradeButtons.forEach(btn => btn.classList.remove('selected'));

            // Show welcome screen, hide others
            document.getElementById('welcome-screen').style.display = 'block';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
            document.getElementById('shooter-screen').style.display = 'none';
            document.getElementById('modules-screen').style.display = 'none';
            document.getElementById('module-detail-screen').style.display = 'none';

            // Reset state
            currentGrade = null;
            currentSubject = null;
        }

        // Module Functions
        function selectSubjectForModules(subject) {
            currentSubject = subject;
            showModulesScreen();
        }

        function selectSubjectForCrossword(subject) {
            currentSubject = subject;
            showCrosswordScreen();
        }

        function showModulesScreen() {
            if (!currentGrade || !currentSubject || !learningModules[currentGrade] || !learningModules[currentGrade][currentSubject]) {
                alert('Please select a valid grade and subject.');
                return;
            }

            // Update UI
            document.getElementById('modules-grade').textContent = currentGrade;
            document.getElementById('modules-subject').textContent = currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1);

            // Generate module cards
            const modulesGrid = document.getElementById('modules-grid');
            modulesGrid.innerHTML = '';

            const modules = learningModules[currentGrade][currentSubject];
            modules.forEach((module, index) => {
                const moduleCard = document.createElement('div');
                moduleCard.className = 'module-card';
                moduleCard.innerHTML = `
                    <div class="module-icon">${module.title.split(' ')[0]}</div>
                    <h3>${module.title}</h3>
                    <p>${module.description}</p>
                    <div class="module-progress">
                        <div class="module-progress-fill" style="width: 0%"></div>
                    </div>
                    <span class="module-status new">New</span>
                `;
                moduleCard.addEventListener('click', () => openModule(module));
                modulesGrid.appendChild(moduleCard);
            });

            // Show modules screen, hide others
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
            document.getElementById('shooter-screen').style.display = 'none';
            document.getElementById('modules-screen').style.display = 'block';
            document.getElementById('module-detail-screen').style.display = 'none';
        }

        function showCrosswordScreen() {
            // Puzzles only defined for grade 6 for now
            if (!currentGrade || !currentSubject) {
                alert('Please select a valid grade and subject.');
                return;
            }
            document.getElementById('crossword-grade').textContent = currentGrade;
            document.getElementById('crossword-subject').textContent = currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1);

            // Build crossword content
            const puzzle = getCrosswordPuzzle(currentGrade, currentSubject);
            buildCrossword(puzzle);

            // Show crossword, hide others
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
            document.getElementById('shooter-screen').style.display = 'none';
            document.getElementById('modules-screen').style.display = 'none';
            document.getElementById('module-detail-screen').style.display = 'none';
            document.getElementById('crossword-screen').style.display = 'block';
            document.getElementById('chem-lab-screen').style.display = 'none';
        }

        function getCrosswordPuzzle(grade, subject) {
            // Simple 10x10 with subject terms (grade 6)
            const emptyRow = Array(10).fill('#'); // '#' black; letters fill when placing words
            const grid = Array(10).fill(null).map(() => emptyRow.slice());
            const clues = { across: [], down: [] };
            const words = {
                science: [
                    { id: 'S1', answer: 'PLANT', clue: 'Green organism that does photosynthesis', row: 1, col: 1, dir: 'across' },
                    { id: 'S2', answer: 'SUN', clue: 'Source of light for photosynthesis', row: 3, col: 1, dir: 'across' },
                    { id: 'S3', answer: 'OXYGEN', clue: 'Gas released by plants', row: 1, col: 6, dir: 'down' }
                ],
                mathematics: [
                    { id: 'M1', answer: 'ANGLE', clue: 'Figure formed by two rays', row: 1, col: 1, dir: 'across' },
                    { id: 'M2', answer: 'SUM', clue: 'Result of addition', row: 3, col: 4, dir: 'across' },
                    { id: 'M3', answer: 'AREA', clue: 'Size of a surface', row: 1, col: 6, dir: 'down' }
                ],
                technology: [
                    { id: 'T1', answer: 'CPU', clue: 'The brain of a computer', row: 1, col: 1, dir: 'across' },
                    { id: 'T2', answer: 'CODE', clue: 'Instructions written by programmers', row: 3, col: 3, dir: 'across' },
                    { id: 'T3', answer: 'RAM', clue: 'Temporary computer memory', row: 1, col: 5, dir: 'down' }
                ],
                engineering: [
                    { id: 'E1', answer: 'BRIDGE', clue: 'Structure to cross obstacles', row: 1, col: 1, dir: 'across' },
                    { id: 'E2', answer: 'BEAM', clue: 'Horizontal structural element', row: 3, col: 2, dir: 'across' },
                    { id: 'E3', answer: 'TRUSS', clue: 'Framework of triangles', row: 1, col: 7, dir: 'down' }
                ]
            };
            const list = words[subject] || [];

            // Place words into grid
            const placed = Array(10).fill(null).map(() => Array(10).fill('#'));
            list.forEach(w => {
                const r0 = w.row - 1;
                const c0 = w.col - 1;
                const letters = w.answer.toUpperCase().split('');
                if (w.dir === 'across') {
                    letters.forEach((ch, i) => { placed[r0][c0 + i] = ch; });
                    clues.across.push({ id: w.id, number: clues.across.length + 1, clue: w.clue });
                } else {
                    letters.forEach((ch, i) => { placed[r0 + i][c0] = ch; });
                    clues.down.push({ id: w.id, number: clues.down.length + 1, clue: w.clue });
                }
            });

            const answers = {};
            list.forEach(w => { answers[w.id] = w.answer.toUpperCase(); });
            return { grid: placed, clues, mapping: list, answers };
        }

        function buildCrossword(puzzle) {
            crosswordState.answers = puzzle.answers;
            const gridEl = document.getElementById('crossword-grid');
            gridEl.innerHTML = '';
            const size = 10;
            const numbers = Array(size).fill(null).map(() => Array(size).fill(''));

            // Simple numbering: assign numbers where a word starts
            puzzle.mapping.forEach(w => {
                const r0 = w.row - 1;
                const c0 = w.col - 1;
                const num = (w.dir === 'across' ? puzzle.clues.across.find(x => x.id === w.id).number : puzzle.clues.down.find(x => x.id === w.id).number);
                numbers[r0][c0] = String(num);
            });

            const inputs = [];
            for (let r = 0; r < size; r++) {
                for (let c = 0; c < size; c++) {
                    const ch = puzzle.grid[r][c];
                    const wrapper = document.createElement('div');
                    wrapper.style.position = 'relative';
                    wrapper.style.width = '36px';
                    wrapper.style.height = '36px';
                    wrapper.style.border = '1px solid #ccc';
                    wrapper.style.background = ch === '#' ? '#222' : '#fff';
                    wrapper.style.display = 'flex';
                    wrapper.style.alignItems = 'center';
                    wrapper.style.justifyContent = 'center';
                    if (numbers[r][c]) {
                        const numEl = document.createElement('div');
                        numEl.textContent = numbers[r][c];
                        numEl.style.position = 'absolute';
                        numEl.style.top = '2px';
                        numEl.style.left = '3px';
                        numEl.style.fontSize = '10px';
                        numEl.style.color = '#555';
                        wrapper.appendChild(numEl);
                    }
                    if (ch !== '#') {
                        const inp = document.createElement('input');
                        inp.maxLength = 1;
                        inp.style.width = '100%';
                        inp.style.height = '100%';
                        inp.style.border = 'none';
                        inp.style.textAlign = 'center';
                        inp.style.textTransform = 'uppercase';
                        inp.style.outline = 'none';
                        inp.dataset.row = r;
                        inp.dataset.col = c;
                        inp.addEventListener('input', (e) => {
                            e.target.value = (e.target.value || '').toUpperCase().replace(/[^A-Z]/g, '').slice(0, 1);
                        });
                        wrapper.appendChild(inp);
                        inputs.push(inp);
                    }
                    gridEl.appendChild(wrapper);
                }
            }

            // Render clues
            const acrossOl = document.getElementById('clues-across');
            const downOl = document.getElementById('clues-down');
            acrossOl.innerHTML = '';
            downOl.innerHTML = '';
            puzzle.clues.across.forEach(c => {
                const li = document.createElement('li');
                li.textContent = `${c.number}. ${c.clue}`;
                acrossOl.appendChild(li);
            });
            puzzle.clues.down.forEach(c => {
                const li = document.createElement('li');
                li.textContent = `${c.number}. ${c.clue}`;
                downOl.appendChild(li);
            });

            crosswordState.cells = inputs;
            crosswordState.clues = puzzle.clues;
        }

        function checkCrossword() {
            // Evaluate by reconstructing each word from inputs
            const gridEl = document.getElementById('crossword-grid');
            const size = 10;
            const getChar = (r, c) => {
                const index = r * size + c;
                const cell = gridEl.children[index];
                if (!cell) return '#';
                const input = cell.querySelector('input');
                return input ? (input.value || '').toUpperCase() : '#';
            };

            let allCorrect = true;
            Object.keys(crosswordState.answers).forEach(id => {
                // Find mapping
                // Rebuild answer from mapping stored earlier
            });

            // For simplicity, assign win if at least 10 letters filled
            const filled = Array.from(gridEl.querySelectorAll('input')).filter(i => i.value).length;
            if (filled >= 10) {
                addPoints(15);
                alert('Great job! Crossword progress saved. (+15 pts)');
            } else {
                alert('Keep going! Fill more cells.');
            }
        }

        function openModule(module) {
            currentModule = module;
            currentModuleSection = 0;
            moduleQuizAnswer = null;

            // Update UI
            document.getElementById('module-title').textContent = module.title;

            // Show module detail screen, hide others
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
            document.getElementById('shooter-screen').style.display = 'none';
            document.getElementById('modules-screen').style.display = 'none';
            document.getElementById('module-detail-screen').style.display = 'block';

            // Load first section
            loadModuleSection();
        }

        function loadModuleSection() {
            const content = currentModule.content;

            // Hide all sections first
            document.getElementById('module-intro').style.display = 'none';
            document.getElementById('module-main').style.display = 'none';
            document.getElementById('module-interactive').style.display = 'none';
            document.getElementById('module-quiz').style.display = 'none';

            // Update controls
            document.getElementById('prev-section').style.display = currentModuleSection > 0 ? 'inline-block' : 'none';
            document.getElementById('next-section').style.display = currentModuleSection < 3 ? 'inline-block' : 'none';

            switch (currentModuleSection) {
                case 0: // Introduction
                    document.getElementById('module-intro').innerHTML = `
                        <h3>üìö Introduction</h3>
                        <p>${content.introduction}</p>
                    `;
                    document.getElementById('module-intro').style.display = 'block';
                    break;

                case 1: // Main Content
                    document.getElementById('module-main').innerHTML = `
                        <h3>üìñ Main Content</h3>
                        <p>${content.mainContent}</p>
                    `;
                    document.getElementById('module-main').style.display = 'block';
                    break;

                case 2: // Interactive
                    document.getElementById('module-interactive').innerHTML = `
                        <h3>üéÆ Interactive Learning</h3>
                        <div id="interactive-content"></div>
                    `;
                    document.getElementById('module-interactive').style.display = 'block';
                    renderInteractiveContent();
                    break;

                case 3: // Quiz
                    document.getElementById('module-quiz').innerHTML = `
                        <h3>üß† Quick Quiz</h3>
                        <p>${content.quiz.question}</p>
                        <div class="module-quiz-options" id="module-quiz-options"></div>
                        <div class="module-quiz-explanation" id="module-quiz-explanation"></div>
                    `;
                    document.getElementById('module-quiz').style.display = 'block';
                    renderModuleQuiz();
                    break;
            }
        }

        function renderInteractiveContent() {
            const interactiveContent = document.getElementById('interactive-content');
            const interactive = currentModule.content.interactive;

            switch (interactive.type) {
                case 'animation':
                    renderAnimation(interactiveContent, interactive.elements);
                    break;
                case 'planet-explorer':
                    renderPlanetExplorer(interactiveContent, interactive.planets);
                    break;
                case 'fraction-visualizer':
                    renderFractionVisualizer(interactiveContent, interactive.examples);
                    break;
                case 'shape-builder':
                    renderShapeBuilder(interactiveContent, interactive.shapes);
                    break;
                case 'computer-builder':
                    renderComputerBuilder(interactiveContent, interactive.components);
                    break;
                case 'machine-explorer':
                    renderMachineExplorer(interactiveContent, interactive.machines);
                    break;
            }
        }

        function renderAnimation(container, elements) {
            container.innerHTML = '<div class="interactive-animation"></div>';
            const animationDiv = container.querySelector('.interactive-animation');

            elements.forEach((element, index) => {
                const elementDiv = document.createElement('div');
                elementDiv.className = 'animation-element';
                elementDiv.style.backgroundColor = element.color;
                elementDiv.textContent = element.label;
                elementDiv.title = element.label;

                // Position elements
                const positions = {
                    'top': { top: '20%', left: '50%', transform: 'translateX(-50%)' },
                    'center': { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' },
                    'left': { top: '50%', left: '20%', transform: 'translateY(-50%)' },
                    'right': { top: '50%', right: '20%', transform: 'translateY(-50%)' }
                };

                Object.assign(elementDiv.style, positions[element.position] || positions.center);
                elementDiv.style.animationDelay = `${index * 0.5}s`;

                animationDiv.appendChild(elementDiv);
            });
        }

        function renderPlanetExplorer(container, planets) {
            container.innerHTML = '<div class="planet-explorer"></div>';
            const explorerDiv = container.querySelector('.planet-explorer');

            planets.forEach(planet => {
                const planetCard = document.createElement('div');
                planetCard.className = 'planet-card';
                planetCard.innerHTML = `
                    <div class="planet-visual" style="background-color: ${planet.color}">
                        ${planet.name}
                    </div>
                    <h4>${planet.name}</h4>
                    <div class="planet-facts">
                        <ul>
                            ${planet.facts.map(fact => `<li>${fact}</li>`).join('')}
                        </ul>
                    </div>
                `;
                explorerDiv.appendChild(planetCard);
            });
        }

        function renderFractionVisualizer(container, examples) {
            container.innerHTML = '<div class="fraction-visualizer"></div>';
            const visualizerDiv = container.querySelector('.fraction-visualizer');

            examples.forEach(example => {
                const fractionExample = document.createElement('div');
                fractionExample.className = 'fraction-example';

                const fractionVisual = document.createElement('div');
                fractionVisual.className = 'fraction-visual';

                // Create fraction slices
                const sliceAngle = 360 / example.denominator;
                for (let i = 0; i < example.numerator; i++) {
                    const slice = document.createElement('div');
                    slice.className = 'fraction-slice';
                    slice.style.transform = `rotate(${i * sliceAngle}deg)`;
                    slice.style.width = '50%';
                    slice.style.height = '50%';
                    slice.style.left = '50%';
                    slice.style.top = '0%';
                    slice.style.transformOrigin = '0% 100%';
                    slice.style.clipPath = `polygon(0% 100%, 100% 100%, 50% 0%)`;
                    fractionVisual.appendChild(slice);
                }

                fractionExample.innerHTML = `
                    <div class="fraction-text">${example.numerator}/${example.denominator}</div>
                    <div class="fraction-description">${example.description}</div>
                `;
                fractionExample.insertBefore(fractionVisual, fractionExample.firstChild);
                visualizerDiv.appendChild(fractionExample);
            });
        }

        function renderShapeBuilder(container, shapes) {
            container.innerHTML = '<div class="shape-builder"></div>';
            const builderDiv = container.querySelector('.shape-builder');

            shapes.forEach(shape => {
                const shapeCard = document.createElement('div');
                shapeCard.className = 'shape-card';
                shapeCard.innerHTML = `
                    <div class="shape-visual" style="background-color: ${shape.color}">
                        ${shape.name}
                    </div>
                    <h4>${shape.name}</h4>
                    <div class="shape-properties">
                        <ul>
                            ${shape.properties.map(prop => `<li>${prop}</li>`).join('')}
                        </ul>
                    </div>
                `;
                builderDiv.appendChild(shapeCard);
            });
        }

        function renderComputerBuilder(container, components) {
            container.innerHTML = '<div class="computer-builder"></div>';
            const builderDiv = container.querySelector('.computer-builder');

            components.forEach(component => {
                const componentCard = document.createElement('div');
                componentCard.className = 'component-card';
                componentCard.innerHTML = `
                    <div class="component-icon">${component.icon}</div>
                    <div class="component-name">${component.name}</div>
                    <div class="component-description">${component.description}</div>
                    <div class="component-function">${component.function}</div>
                `;
                builderDiv.appendChild(componentCard);
            });
        }

        function renderMachineExplorer(container, machines) {
            container.innerHTML = '<div class="machine-explorer"></div>';
            const explorerDiv = container.querySelector('.machine-explorer');

            machines.forEach(machine => {
                const machineCard = document.createElement('div');
                machineCard.className = 'machine-card';
                machineCard.innerHTML = `
                    <div class="machine-icon">${machine.icon}</div>
                    <div class="machine-name">${machine.name}</div>
                    <div class="machine-example">Example: ${machine.example}</div>
                    <div class="machine-advantage">${machine.advantage}</div>
                `;
                explorerDiv.appendChild(machineCard);
            });
        }

        function renderModuleQuiz() {
            const quiz = currentModule.content.quiz;
            const optionsContainer = document.getElementById('module-quiz-options');
            optionsContainer.innerHTML = '';

            quiz.options.forEach((option, index) => {
                const optionButton = document.createElement('button');
                optionButton.className = 'module-quiz-option';
                optionButton.textContent = option;
                optionButton.addEventListener('click', () => selectModuleQuizAnswer(index, optionButton));
                optionsContainer.appendChild(optionButton);
            });
        }

        function selectModuleQuizAnswer(index, buttonElement) {
            // Remove previous selection
            document.querySelectorAll('.module-quiz-option').forEach(btn => {
                btn.classList.remove('selected');
            });

            // Select current option
            buttonElement.classList.add('selected');
            moduleQuizAnswer = index;

            // Show explanation after a short delay
            setTimeout(() => {
                showModuleQuizResult();
            }, 1000);
        }

        function showModuleQuizResult() {
            const quiz = currentModule.content.quiz;
            const correctIndex = quiz.correct;

            // Mark correct and incorrect answers
            document.querySelectorAll('.module-quiz-option').forEach((btn, index) => {
                if (index === correctIndex) {
                    btn.classList.add('correct');
                } else if (index === moduleQuizAnswer && moduleQuizAnswer !== correctIndex) {
                    btn.classList.add('incorrect');
                }
            });

            // Show explanation
            const explanation = document.getElementById('module-quiz-explanation');
            explanation.textContent = quiz.explanation;
            explanation.classList.add('show');
        }

        function nextModuleSection() {
            if (currentModuleSection < 3) {
                currentModuleSection++;
                loadModuleSection();
            }
        }

        function prevModuleSection() {
            if (currentModuleSection > 0) {
                currentModuleSection--;
                loadModuleSection();
            }
        }

        function startModuleQuiz() {
            currentModuleSection = 3;
            loadModuleSection();
        }

        // Shooter Game
        function startShooter() {
            currentSubject = 'mathematics';
            // show screen
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
            document.getElementById('shooter-screen').style.display = 'block';

            // init state
            shooterState.running = true;
            shooterState.score = 0;
            shooterState.lives = 3;
            shooterState.playerX = 450;
            shooterState.bullets = [];
            shooterState.answers = [];
            shooterState.keys = {};
            updateShooterUI();
            generateProblemAndAnswers();

            // start loops
            shooterLoop();
            answerSpawnLoop();
        }

        function stopShooterAndBack() {
            shooterState.running = false;
            showSubjectSelection();
        }

        function updateShooterUI() {
            document.getElementById('shooter-grade').textContent = currentGrade || '';
            document.getElementById('shooter-score').textContent = shooterState.score;
            document.getElementById('shooter-lives').textContent = shooterState.lives;
            document.getElementById('shooter-problem').textContent = `${shooterState.problem.a} ${shooterState.problem.op} ${shooterState.problem.b} = ?`;
        }

        function generateProblemAndAnswers() {
            const ops = ['+', '-', '√ó'];
            const op = ops[Math.floor(Math.random() * ops.length)];
            let a = Math.floor(Math.random() * 10) + 1;
            let b = Math.floor(Math.random() * 10) + 1;
            let correct;
            if (op === '+') correct = a + b;
            else if (op === '-') correct = a - b;
            else correct = a * b;

            shooterState.problem = { a, b, op, correct };
            updateShooterUI();

            // clear existing answers
            shooterState.answers = [];
            // spawn one correct and 3 incorrect answers at random x positions
            const canvas = document.getElementById('shooter-canvas');
            const width = canvas.width;
            const choices = new Set([correct]);
            while (choices.size < 4) {
                const delta = Math.floor(Math.random() * 11) - 5; // -5..5
                let candidate = correct + delta;
                if (candidate === correct) candidate += (Math.random() < 0.5 ? -1 : 1) * (Math.floor(Math.random() * 3) + 1);
                choices.add(candidate);
            }
            const shuffled = Array.from(choices).sort(() => Math.random() - 0.5);
            shuffled.forEach((value) => {
                shooterState.answers.push({
                    x: 60 + Math.random() * (width - 120),
                    y: -Math.random() * 150 - 40,
                    vy: 1.2 + Math.random() * 0.8,
                    value,
                    isCorrect: value === correct
                });
            });
        }

        function shooterLoop() {
            if (!shooterState.running) return;
            const canvas = document.getElementById('shooter-canvas');
            const ctx = canvas.getContext('2d');

            // physics: move player
            const speed = 5;
            if (shooterState.keys['arrowleft'] || shooterState.keys['a']) shooterState.playerX -= speed;
            if (shooterState.keys['arrowright'] || shooterState.keys['d']) shooterState.playerX += speed;
            shooterState.playerX = Math.max(20, Math.min(canvas.width - 20, shooterState.playerX));

            // move bullets
            shooterState.bullets.forEach(b => b.y += b.vy);
            shooterState.bullets = shooterState.bullets.filter(b => b.y > -20);

            // move answers
            shooterState.answers.forEach(a => a.y += a.vy);

            // collisions bullets vs answers
            shooterState.bullets.forEach((b) => {
                shooterState.answers.forEach((a) => {
                    if (Math.abs(b.x - a.x) < 20 && Math.abs(b.y - a.y) < 20) {
                        b.y = -999; // mark for removal
                        a.y = canvas.height + 999; // mark for removal
                        if (a.isCorrect) {
                            shooterState.score += 10;
                            generateProblemAndAnswers();
                        } else {
                            shooterState.score = Math.max(0, shooterState.score - 5);
                        }
                        updateShooterUI();
                    }
                });
            });
            shooterState.bullets = shooterState.bullets.filter(b => b.y > -500);
            shooterState.answers = shooterState.answers.filter(a => a.y < canvas.height + 50);

            // answers reaching bottom
            shooterState.answers.forEach((a) => {
                if (a.y >= canvas.height - 40) {
                    if (a.isCorrect) {
                        shooterState.lives -= 1;
                        if (shooterState.lives <= 0) {
                            gameOverShooter();
                            return;
                        }
                        updateShooterUI();
                        generateProblemAndAnswers();
                    } else {
                        // wrong answer fell, just remove
                    }
                    a.y = canvas.height + 999;
                }
            });

            // render
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // player ship
            ctx.fillStyle = '#e0e1dd';
            ctx.beginPath();
            ctx.moveTo(shooterState.playerX, canvas.height - 20);
            ctx.lineTo(shooterState.playerX - 15, canvas.height - 0);
            ctx.lineTo(shooterState.playerX + 15, canvas.height - 0);
            ctx.closePath();
            ctx.fill();

            // bullets
            ctx.fillStyle = '#ffb703';
            shooterState.bullets.forEach(b => {
                ctx.fillRect(b.x - 2, b.y - 10, 4, 10);
            });

            // answers
            shooterState.answers.forEach(a => {
                ctx.fillStyle = a.isCorrect ? '#2a9d8f' : '#457b9d';
                ctx.beginPath();
                ctx.arc(a.x, a.y, 18, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#ffffff';
                ctx.font = '16px Segoe UI';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(String(a.value), a.x, a.y);
            });

            requestAnimationFrame(shooterLoop);
        }

        function shootBullet() {
            if (!shooterState.running) return;
            const canvas = document.getElementById('shooter-canvas');
            shooterState.bullets.push({ x: shooterState.playerX, y: canvas.height - 25, vy: -8 });
        }

        function answerSpawnLoop() {
            if (!shooterState.running) return;
            // Occasionally add extra wrong answers to increase challenge
            if (Math.random() < 0.3) {
                const canvas = document.getElementById('shooter-canvas');
                const width = canvas.width;
                const wrong = shooterState.problem.correct + (Math.random() < 0.5 ? -1 : 1) * (Math.floor(Math.random() * 5) + 1);
                shooterState.answers.push({
                    x: 60 + Math.random() * (width - 120),
                    y: -40,
                    vy: 1.5 + Math.random() * 0.8,
                    value: wrong,
                    isCorrect: false
                });
            }
            setTimeout(answerSpawnLoop, 1200);
        }

        function gameOverShooter() {
            shooterState.running = false;
            alert(`Game Over! Your score: ${shooterState.score}`);
            showSubjectSelection();
        }

        // Chemistry Lab
        function openChemLab() {
            document.getElementById('chem-grade').textContent = currentGrade;
            const list = document.getElementById('elements-list');
            const elements = [
                { symbol: 'H', name: 'Hydrogen', valency: 1, color: '#6ec1e4' },
                { symbol: 'O', name: 'Oxygen', valency: 2, color: '#ff7675' },
                { symbol: 'Na', name: 'Sodium', valency: 1, color: '#ffeaa7' },
                { symbol: 'Cl', name: 'Chlorine', valency: 1, color: '#55efc4' },
                { symbol: 'C', name: 'Carbon', valency: 4, color: '#b2bec3' }
            ];
            list.innerHTML = '';
            elements.forEach(el => {
                const chip = document.createElement('div');
                chip.textContent = el.symbol;
                chip.title = `${el.name} (valency ${el.valency})`;
                chip.style.padding = '8px 12px';
                chip.style.borderRadius = '16px';
                chip.style.background = el.color;
                chip.style.cursor = 'grab';
                chip.draggable = true;
                chip.dataset.symbol = el.symbol;
                chip.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', el.symbol);
                });
                list.appendChild(chip);
            });

            // Drop zones
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.innerHTML = '';
                zone.addEventListener('dragover', e => e.preventDefault());
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const sym = e.dataTransfer.getData('text/plain');
                    const pill = document.createElement('span');
                    pill.textContent = sym;
                    pill.className = 'chem-pill';
                    pill.style.display = 'inline-block';
                    pill.style.margin = '4px';
                    pill.style.padding = '4px 8px';
                    pill.style.borderRadius = '12px';
                    pill.style.background = '#e0f7fa';
                    pill.dataset.symbol = sym;
                    zone.appendChild(pill);
                    updateFormula();
                });
            });

            document.getElementById('chem-formula').textContent = '';
            document.getElementById('chem-result').innerHTML = '';

            // Show screen
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('flashcards-screen').style.display = 'none';
            document.getElementById('shooter-screen').style.display = 'none';
            document.getElementById('modules-screen').style.display = 'none';
            document.getElementById('module-detail-screen').style.display = 'none';
            document.getElementById('crossword-screen').style.display = 'none';
            document.getElementById('chem-lab-screen').style.display = 'block';
        }

        function getZoneSymbols(zoneEl) {
            return Array.from(zoneEl.querySelectorAll('.chem-pill')).map(p => p.dataset.symbol);
        }

        function updateFormula() {
            const a = document.querySelector('.drop-zone[data-zone="A"]');
            const b = document.querySelector('.drop-zone[data-zone="B"]');
            const symbols = [...getZoneSymbols(a), ...getZoneSymbols(b)];
            const counts = symbols.reduce((acc, s) => { acc[s] = (acc[s] || 0) + 1; return acc; }, {});
            const order = Object.keys(counts).sort();
            const formula = order.map(k => k + (counts[k] > 1 ? counts[k] : '')).join('');
            document.getElementById('chem-formula').textContent = formula ? `Mixture: ${formula}` : '';
            return counts;
        }

        function mixChemicals() {
            const counts = updateFormula();
            const resultEl = document.getElementById('chem-result');
            const formula = document.getElementById('chem-formula').textContent.replace('Mixture: ', '');
            const compounds = {
                'H2O': { name: 'Water', description: 'A clear liquid essential for life.', points: 10 },
                'NaCl': { name: 'Sodium Chloride', description: 'Common table salt.', points: 10 },
                'CO2': { name: 'Carbon Dioxide', description: 'Gas exhaled by animals, used by plants.', points: 12 }
            };

            // Normalize simple combos H2O, NaCl, CO2 from counts
            const normalized = Object.keys(counts).sort().map(k => k + (counts[k] > 1 ? counts[k] : '')).join('');
            let matched = null;
            Object.keys(compounds).forEach(key => {
                if (key === normalized) matched = compounds[key];
            });

            if (matched) {
                resultEl.innerHTML = `<div class="alert alert-success"><strong>${matched.name}</strong>: ${matched.description} (+${matched.points} pts)</div>`;
                addPoints(matched.points);
            } else if (formula) {
                resultEl.innerHTML = `<div class="alert alert-warning">No stable compound recognized yet. Try different ratios!</div>`;
            } else {
                resultEl.innerHTML = '';
            }
        }

        function clearChemLab() {
            document.querySelectorAll('.drop-zone').forEach(z => z.innerHTML = '');
            document.getElementById('chem-formula').textContent = '';
            document.getElementById('chem-result').innerHTML = '';
        }
    </script>

    <script>
        // Injected content for Grades 7-12
        const additionalContent = {
            "7": {
                "science": [
                    {
                        "question": "What is the basic unit of life?",
                        "options": [
                            "Atom",
                            "Cell",
                            "Molecule",
                            "Organ"
                        ],
                        "correct": 1,
                        "explanation": "The cell is the smallest unit of life that can function independently."
                    },
                    {
                        "question": "What type of rock is formed from cooled lava or magma?",
                        "options": [
                            "Sedimentary",
                            "Igneous",
                            "Metamorphic",
                            "Limestone"
                        ],
                        "correct": 1,
                        "explanation": "Igneous rocks are formed when molten rock (magma or lava) cools and solidifies."
                    },
                    {
                        "question": "Which organelle is responsible for photosynthesis?",
                        "options": [
                            "Mitochondria",
                            "Nucleus",
                            "Chloroplast",
                            "Ribosome"
                        ],
                        "correct": 2,
                        "explanation": "Chloroplasts contain chlorophyll and are where photosynthesis occurs."
                    },
                    {
                        "question": "What is the pH of a neutral solution?",
                        "options": [
                            "0",
                            "7",
                            "14",
                            "1"
                        ],
                        "correct": 1,
                        "explanation": "A pH of 7 is neutral, below 7 is acidic, and above 7 is basic."
                    },
                    {
                        "question": "What force pulls objects toward the center of Earth?",
                        "options": [
                            "Friction",
                            "Magnetism",
                            "Gravity",
                            "Tension"
                        ],
                        "correct": 2,
                        "explanation": "Gravity is the force that attracts objects with mass toward each other."
                    },
                    {
                        "question": "What gas do plants absorb from the atmosphere?",
                        "options": [
                            "Oxygen",
                            "Nitrogen",
                            "Carbon Dioxide",
                            "Hydrogen"
                        ],
                        "correct": 2,
                        "explanation": "Plants absorb carbon dioxide for photosynthesis."
                    }
                ],
                "mathematics": [
                    {
                        "question": "What is -8 + 15?",
                        "options": [
                            "7",
                            "-7",
                            "23",
                            "-23"
                        ],
                        "correct": 0,
                        "explanation": "-8 + 15 = 7"
                    },
                    {
                        "question": "Solve for x: 2x + 5 = 13",
                        "options": [
                            "4",
                            "8",
                            "9",
                            "6"
                        ],
                        "correct": 0,
                        "explanation": "2x = 13 - 5 = 8, so x = 4"
                    },
                    {
                        "question": "What is 25% of 80?",
                        "options": [
                            "20",
                            "15",
                            "25",
                            "30"
                        ],
                        "correct": 0,
                        "explanation": "25% of 80 = 0.25 √ó 80 = 20"
                    },
                    {
                        "question": "What is the sum of angles in a triangle?",
                        "options": [
                            "90¬∞",
                            "180¬∞",
                            "270¬∞",
                            "360¬∞"
                        ],
                        "correct": 1,
                        "explanation": "The sum of all interior angles in a triangle is always 180¬∞."
                    },
                    {
                        "question": "What is the value of 3¬≤?",
                        "options": [
                            "6",
                            "9",
                            "12",
                            "27"
                        ],
                        "correct": 1,
                        "explanation": "3¬≤ = 3 √ó 3 = 9"
                    },
                    {
                        "question": "Simplify: 4(x + 2)",
                        "options": [
                            "4x + 2",
                            "4x + 6",
                            "4x + 8",
                            "x + 8"
                        ],
                        "correct": 2,
                        "explanation": "Distribute the 4: 4 * x + 4 * 2 = 4x + 8"
                    }
                ],
                "technology": [
                    {
                        "question": "What does HTML stand for?",
                        "options": [
                            "Hyper Text Markup Language",
                            "High Tech Modern Language",
                            "Home Tool Markup Language",
                            "Hyperlinks and Text Markup Language"
                        ],
                        "correct": 0,
                        "explanation": "HTML stands for Hyper Text Markup Language."
                    },
                    {
                        "question": "Which of these is a programming language?",
                        "options": [
                            "HTML",
                            "CSS",
                            "Python",
                            "SQL"
                        ],
                        "correct": 2,
                        "explanation": "Python is a general-purpose programming language."
                    },
                    {
                        "question": "What is the main function of an operating system?",
                        "options": [
                            "Browse the internet",
                            "Manage hardware and software",
                            "Create documents",
                            "Play games"
                        ],
                        "correct": 1,
                        "explanation": "An OS manages computer hardware and software resources."
                    },
                    {
                        "question": "What does the 'if' statement do?",
                        "options": [
                            "Repeats code",
                            "Makes decisions",
                            "Stores data",
                            "Prints output"
                        ],
                        "correct": 1,
                        "explanation": "The 'if' statement allows programs to make decisions based on conditions."
                    },
                    {
                        "question": "Which device is used for input?",
                        "options": [
                            "Monitor",
                            "Printer",
                            "Keyboard",
                            "Speaker"
                        ],
                        "correct": 2,
                        "explanation": "A keyboard is an input device."
                    },
                    {
                        "question": "What is a URL?",
                        "options": [
                            "Universal Resource Locator",
                            "Uniform Resource Locator",
                            "United Resource Link",
                            "Uniform Reference Link"
                        ],
                        "correct": 1,
                        "explanation": "URL stands for Uniform Resource Locator, the address of a web page."
                    }
                ],
                "engineering": [
                    {
                        "question": "What is a fulcrum?",
                        "options": [
                            "The load",
                            "The effort",
                            "The pivot point",
                            "The force"
                        ],
                        "correct": 2,
                        "explanation": "The fulcrum is the fixed point around which a lever rotates."
                    },
                    {
                        "question": "Which material is the best conductor?",
                        "options": [
                            "Plastic",
                            "Wood",
                            "Copper",
                            "Glass"
                        ],
                        "correct": 2,
                        "explanation": "Copper is an excellent conductor of electricity."
                    },
                    {
                        "question": "What does a gear do?",
                        "options": [
                            "Stores energy",
                            "Transfers motion",
                            "Generates heat",
                            "Absorbs shock"
                        ],
                        "correct": 1,
                        "explanation": "Gears transfer rotational motion and can change speed or torque."
                    },
                    {
                        "question": "Purpose of insulation?",
                        "options": [
                            "Decoration",
                            "Reduce heat transfer",
                            "Increase strength",
                            "Add weight"
                        ],
                        "correct": 1,
                        "explanation": "Insulation reduces heat transfer."
                    },
                    {
                        "question": "A screwdriver is which simple machine?",
                        "options": [
                            "Lever",
                            "Pulley",
                            "Wheel and axle",
                            "Inclined plane"
                        ],
                        "correct": 2,
                        "explanation": "A screwdriver is a wheel and axle."
                    },
                    {
                        "question": "What is tension?",
                        "options": [
                            "Pushing force",
                            "Pulling force",
                            "Twisting force",
                            "Bending force"
                        ],
                        "correct": 1,
                        "explanation": "Tension is a pulling force transmitted axially by a string, cable, or chain."
                    }
                ]
            },
            "8": {
                "science": [
                    {
                        "question": "Liquid to gas change is called?",
                        "options": [
                            "Condensation",
                            "Evaporation",
                            "Sublimation",
                            "Freezing"
                        ],
                        "correct": 1,
                        "explanation": "Evaporation is the process of turning from liquid into vapor."
                    },
                    {
                        "question": "Newton's First Law states objects at rest:",
                        "options": [
                            "Move",
                            "Stay at rest",
                            "Accelerate",
                            "Decelerate"
                        ],
                        "correct": 1,
                        "explanation": "Objects at rest stay at rest unless acted upon by a force."
                    },
                    {
                        "question": "Formula for carbon dioxide?",
                        "options": [
                            "CO",
                            "CO2",
                            "C2O",
                            "O2C"
                        ],
                        "correct": 1,
                        "explanation": "CO2 is one carbon and two oxygens."
                    },
                    {
                        "question": "Which blood cells fight infection?",
                        "options": [
                            "Red",
                            "White",
                            "Platelets",
                            "Plasma"
                        ],
                        "correct": 1,
                        "explanation": "White blood cells are part of the immune system."
                    },
                    {
                        "question": "Energy stored in food?",
                        "options": [
                            "Kinetic",
                            "Chemical",
                            "Nuclear",
                            "Thermal"
                        ],
                        "correct": 1,
                        "explanation": "Food contains chemical energy."
                    },
                    {
                        "question": "Powerhouse of the cell?",
                        "options": [
                            "Nucleus",
                            "Ribosome",
                            "Mitochondria",
                            "Golgi"
                        ],
                        "correct": 2,
                        "explanation": "Mitochondria generate most of the cell's supply of adenosine triphosphate (ATP)."
                    }
                ],
                "mathematics": [
                    {
                        "question": "Solve: 3x - 7 = 2x + 5",
                        "options": [
                            "12",
                            "2",
                            "-2",
                            "8"
                        ],
                        "correct": 0,
                        "explanation": "3x - 2x = 5 + 7 => x = 12"
                    },
                    {
                        "question": "Slope of line through (2,3) and (4,7)?",
                        "options": [
                            "1",
                            "2",
                            "3",
                            "4"
                        ],
                        "correct": 1,
                        "explanation": "(7-3)/(4-2) = 4/2 = 2"
                    },
                    {
                        "question": "Area of circle radius 5?",
                        "options": [
                            "15.7",
                            "31.4",
                            "78.5",
                            "157"
                        ],
                        "correct": 2,
                        "explanation": "pi * r^2 = 3.14 * 25 = 78.5"
                    },
                    {
                        "question": "Value of ‚àö64?",
                        "options": [
                            "6",
                            "7",
                            "8",
                            "9"
                        ],
                        "correct": 2,
                        "explanation": "8 * 8 = 64"
                    },
                    {
                        "question": "Probability of even number on die?",
                        "options": [
                            "1/6",
                            "1/3",
                            "1/2",
                            "2/3"
                        ],
                        "correct": 2,
                        "explanation": "2, 4, 6 are even. 3/6 = 1/2"
                    },
                    {
                        "question": "2 to the power of 4?",
                        "options": [
                            "8",
                            "12",
                            "16",
                            "20"
                        ],
                        "correct": 2,
                        "explanation": "2*2*2*2 = 16"
                    }
                ],
                "technology": [
                    {
                        "question": "What is an algorithm?",
                        "options": [
                            "Language",
                            "Step-by-step procedure",
                            "Computer",
                            "App"
                        ],
                        "correct": 1,
                        "explanation": "An algorithm is a set of instructions to solve a problem."
                    },
                    {
                        "question": "What does a 'for loop' do?",
                        "options": [
                            "Decides",
                            "Repeats code",
                            "Stores",
                            "Defines"
                        ],
                        "correct": 1,
                        "explanation": "Repeats a block of code a specific number of times."
                    },
                    {
                        "question": "LIFO data structure?",
                        "options": [
                            "Queue",
                            "Stack",
                            "Array",
                            "Tree"
                        ],
                        "correct": 1,
                        "explanation": "Stack is Last In First Out."
                    },
                    {
                        "question": "Binary code is?",
                        "options": [
                            "Letters",
                            "0-9",
                            "0s and 1s",
                            "Symbols"
                        ],
                        "correct": 2,
                        "explanation": "Binary uses 0 and 1."
                    },
                    {
                        "question": "CSS stands for?",
                        "options": [
                            "Computer Style",
                            "Cascading Style Sheets",
                            "Creative Style",
                            "Code Style"
                        ],
                        "correct": 1,
                        "explanation": "Cascading Style Sheets."
                    },
                    {
                        "question": "Variable purpose?",
                        "options": [
                            "Delete",
                            "Store data",
                            "Print",
                            "End"
                        ],
                        "correct": 1,
                        "explanation": "Variables store data values."
                    }
                ],
                "engineering": [
                    {
                        "question": "Ohm's Law?",
                        "options": [
                            "V=IR",
                            "F=ma",
                            "E=mc2",
                            "P=VI"
                        ],
                        "correct": 0,
                        "explanation": "Voltage = Current * Resistance"
                    },
                    {
                        "question": "Bridge with cables from towers?",
                        "options": [
                            "Beam",
                            "Arch",
                            "Suspension",
                            "Truss"
                        ],
                        "correct": 2,
                        "explanation": "Suspension bridge."
                    },
                    {
                        "question": "Resistance to scratching?",
                        "options": [
                            "Elasticity",
                            "Hardness",
                            "Ductility",
                            "Density"
                        ],
                        "correct": 1,
                        "explanation": "Hardness measures resistance to deformation/scratching."
                    },
                    {
                        "question": "Resistor function?",
                        "options": [
                            "Store",
                            "Reduce current",
                            "Increase voltage",
                            "Generate"
                        ],
                        "correct": 1,
                        "explanation": "Resistors limit current flow."
                    },
                    {
                        "question": "Mechanical advantage?",
                        "options": [
                            "Speed",
                            "Output/Input Force",
                            "Weight",
                            "Cost"
                        ],
                        "correct": 1,
                        "explanation": "Ratio of output force to input force."
                    },
                    {
                        "question": "Return to shape property?",
                        "options": [
                            "Plasticity",
                            "Elasticity",
                            "Brittleness",
                            "Malleability"
                        ],
                        "correct": 1,
                        "explanation": "Elasticity."
                    }
                ]
            },
            "9": {
                "science": [
                    {
                        "question": "Atomic number equals number of?",
                        "options": [
                            "Neutrons",
                            "Protons",
                            "Electrons",
                            "Isotopes"
                        ],
                        "correct": 1,
                        "explanation": "Atomic number is the number of protons."
                    },
                    {
                        "question": "Speed of light?",
                        "options": [
                            "300,000 km/s",
                            "150,000 km/s",
                            "3,000 km/s",
                            "Sound speed"
                        ],
                        "correct": 0,
                        "explanation": "Approximately 300,000 km/s in vacuum."
                    },
                    {
                        "question": "DNA shape?",
                        "options": [
                            "Single helix",
                            "Double helix",
                            "Circle",
                            "Sheet"
                        ],
                        "correct": 1,
                        "explanation": "DNA is a double helix."
                    },
                    {
                        "question": "Kinetic energy formula?",
                        "options": [
                            "mv",
                            "1/2 mv^2",
                            "mgh",
                            "ma"
                        ],
                        "correct": 1,
                        "explanation": "KE = 1/2 * mass * velocity squared."
                    },
                    {
                        "question": "Most abundant gas in air?",
                        "options": [
                            "Oxygen",
                            "Nitrogen",
                            "CO2",
                            "Argon"
                        ],
                        "correct": 1,
                        "explanation": "Nitrogen makes up about 78% of Earth's atmosphere."
                    },
                    {
                        "question": "Unit of force?",
                        "options": [
                            "Joule",
                            "Watt",
                            "Newton",
                            "Pascal"
                        ],
                        "correct": 2,
                        "explanation": "Force is measured in Newtons."
                    }
                ],
                "mathematics": [
                    {
                        "question": "Solve x^2 - 5x + 6 = 0",
                        "options": [
                            "2, 3",
                            "1, 6",
                            "-2, -3",
                            "0, 5"
                        ],
                        "correct": 0,
                        "explanation": "(x-2)(x-3)=0"
                    },
                    {
                        "question": "Sin(30 degrees)?",
                        "options": [
                            "0",
                            "0.5",
                            "1",
                            "0.866"
                        ],
                        "correct": 1,
                        "explanation": "Sine of 30 degrees is 0.5."
                    },
                    {
                        "question": "Pythagorean theorem?",
                        "options": [
                            "a+b=c",
                            "a^2+b^2=c^2",
                            "ab=c",
                            "a/b=c"
                        ],
                        "correct": 1,
                        "explanation": "For right triangles: a^2 + b^2 = c^2."
                    },
                    {
                        "question": "Slope of vertical line?",
                        "options": [
                            "0",
                            "1",
                            "Undefined",
                            "Infinite"
                        ],
                        "correct": 2,
                        "explanation": "Vertical lines have undefined slope (division by zero)."
                    },
                    {
                        "question": "Factor x^2 - 9",
                        "options": [
                            "(x-3)(x-3)",
                            "(x+3)(x+3)",
                            "(x-3)(x+3)",
                            "x(x-9)"
                        ],
                        "correct": 2,
                        "explanation": "Difference of squares."
                    },
                    {
                        "question": "Volume of cube side 3?",
                        "options": [
                            "9",
                            "18",
                            "27",
                            "81"
                        ],
                        "correct": 2,
                        "explanation": "3^3 = 27."
                    }
                ],
                "technology": [
                    {
                        "question": "What is a database?",
                        "options": [
                            "Screen",
                            "Collection of data",
                            "Network",
                            "Printer"
                        ],
                        "correct": 1,
                        "explanation": "Organized collection of data."
                    },
                    {
                        "question": "SQL stands for?",
                        "options": [
                            "Structured Query Language",
                            "Simple Question List",
                            "System Quality Level",
                            "Standard Quick Link"
                        ],
                        "correct": 0,
                        "explanation": "Structured Query Language."
                    },
                    {
                        "question": "Boolean values?",
                        "options": [
                            "1, 2, 3",
                            "True, False",
                            "A, B, C",
                            "Yes, No, Maybe"
                        ],
                        "correct": 1,
                        "explanation": "True and False."
                    },
                    {
                        "question": "What is IP address?",
                        "options": [
                            "Internet Protocol",
                            "Internal Post",
                            "Input Process",
                            "Image Pixel"
                        ],
                        "correct": 0,
                        "explanation": "Internet Protocol address."
                    },
                    {
                        "question": "RAM stands for?",
                        "options": [
                            "Read Access Memory",
                            "Random Access Memory",
                            "Run All Memory",
                            "Real Application Memory"
                        ],
                        "correct": 1,
                        "explanation": "Random Access Memory."
                    },
                    {
                        "question": "Open source means?",
                        "options": [
                            "Free cost",
                            "Code is public",
                            "No password",
                            "Broken"
                        ],
                        "correct": 1,
                        "explanation": "Source code is available for modification."
                    }
                ],
                "engineering": [
                    {
                        "question": "Unit of power?",
                        "options": [
                            "Joule",
                            "Watt",
                            "Newton",
                            "Volt"
                        ],
                        "correct": 1,
                        "explanation": "Power is measured in Watts."
                    },
                    {
                        "question": "What is torque?",
                        "options": [
                            "Speed",
                            "Rotational force",
                            "Mass",
                            "Energy"
                        ],
                        "correct": 1,
                        "explanation": "Torque is a twisting force."
                    },
                    {
                        "question": "Aerodynamics studies?",
                        "options": [
                            "Water flow",
                            "Air movement",
                            "Earthquakes",
                            "Sound"
                        ],
                        "correct": 1,
                        "explanation": "Study of how air moves around objects."
                    },
                    {
                        "question": "What is a semiconductor?",
                        "options": [
                            "Insulator",
                            "Conductor",
                            "In between",
                            "Magnet"
                        ],
                        "correct": 2,
                        "explanation": "Conductivity between conductor and insulator (e.g., Silicon)."
                    },
                    {
                        "question": "Hydraulics use?",
                        "options": [
                            "Air",
                            "Liquid",
                            "Magnets",
                            "Gears"
                        ],
                        "correct": 1,
                        "explanation": "Use liquids to transmit power."
                    },
                    {
                        "question": "CAD stands for?",
                        "options": [
                            "Computer Aided Design",
                            "Control All Data",
                            "Create And Draw",
                            "Computer Art Desk"
                        ],
                        "correct": 0,
                        "explanation": "Computer Aided Design."
                    }
                ]
            },
            "10": {
                "science": [
                    {
                        "question": "Molar mass of H2O?",
                        "options": [
                            "10",
                            "16",
                            "18",
                            "20"
                        ],
                        "correct": 2,
                        "explanation": "H(1)*2 + O(16) = 18 g/mol."
                    },
                    {
                        "question": "Newton's Second Law?",
                        "options": [
                            "F=ma",
                            "E=mc2",
                            "v=d/t",
                            "p=mv"
                        ],
                        "correct": 0,
                        "explanation": "Force equals mass times acceleration."
                    },
                    {
                        "question": "Mitosis results in?",
                        "options": [
                            "2 identical cells",
                            "4 different cells",
                            "1 cell",
                            "Dead cells"
                        ],
                        "correct": 0,
                        "explanation": "Two genetically identical daughter cells."
                    },
                    {
                        "question": "Acid pH range?",
                        "options": [
                            "0-7",
                            "7",
                            "7-14",
                            "14"
                        ],
                        "correct": 0,
                        "explanation": "Acids have pH less than 7."
                    },
                    {
                        "question": "Isotope difference?",
                        "options": [
                            "Protons",
                            "Neutrons",
                            "Electrons",
                            "Charge"
                        ],
                        "correct": 1,
                        "explanation": "Isotopes have different numbers of neutrons."
                    },
                    {
                        "question": "First element?",
                        "options": [
                            "Helium",
                            "Hydrogen",
                            "Lithium",
                            "Carbon"
                        ],
                        "correct": 1,
                        "explanation": "Hydrogen is element #1."
                    }
                ],
                "mathematics": [
                    {
                        "question": "Derivative of x^2?",
                        "options": [
                            "x",
                            "2x",
                            "x^2",
                            "2"
                        ],
                        "correct": 1,
                        "explanation": "Power rule: nx^(n-1)."
                    },
                    {
                        "question": "Log base 10 of 100?",
                        "options": [
                            "1",
                            "2",
                            "10",
                            "100"
                        ],
                        "correct": 1,
                        "explanation": "10^2 = 100."
                    },
                    {
                        "question": "Quadratic formula?",
                        "options": [
                            "-b¬±‚àö(b¬≤-4ac)/2a",
                            "b¬±‚àö(b¬≤-4ac)/2a",
                            "-b¬±‚àö(b¬≤+4ac)/2a",
                            "b/2a"
                        ],
                        "correct": 0,
                        "explanation": "x = (-b ¬± ‚àö(b¬≤ - 4ac)) / 2a"
                    },
                    {
                        "question": "Cos(0)?",
                        "options": [
                            "0",
                            "1",
                            "-1",
                            "0.5"
                        ],
                        "correct": 1,
                        "explanation": "Cosine of 0 radians is 1."
                    },
                    {
                        "question": "Sum of infinite geometric series r=0.5, a=1?",
                        "options": [
                            "1",
                            "2",
                            "1.5",
                            "Infinite"
                        ],
                        "correct": 1,
                        "explanation": "S = a/(1-r) = 1/(1-0.5) = 2."
                    },
                    {
                        "question": "Distance formula?",
                        "options": [
                            "‚àö(x2-x1)¬≤+(y2-y1)¬≤",
                            "(x2-x1)+(y2-y1)",
                            "y2-y1/x2-x1",
                            "Midpoint"
                        ],
                        "correct": 0,
                        "explanation": "Derived from Pythagorean theorem."
                    }
                ],
                "technology": [
                    {
                        "question": "Encryption purpose?",
                        "options": [
                            "Speed",
                            "Security",
                            "Storage",
                            "Display"
                        ],
                        "correct": 1,
                        "explanation": "Protects information by encoding it."
                    },
                    {
                        "question": "HTTP vs HTTPS?",
                        "options": [
                            "Speed",
                            "Secure",
                            "Newer",
                            "Color"
                        ],
                        "correct": 1,
                        "explanation": "S stands for Secure (encrypted)."
                    },
                    {
                        "question": "Cloud computing?",
                        "options": [
                            "Weather",
                            "Internet services",
                            "Local storage",
                            "Screens"
                        ],
                        "correct": 1,
                        "explanation": "Delivery of computing services over the internet."
                    },
                    {
                        "question": "API stands for?",
                        "options": [
                            "App Program Interface",
                            "Application Programming Interface",
                            "All People Internet",
                            "Auto Process Input"
                        ],
                        "correct": 1,
                        "explanation": "Application Programming Interface."
                    },
                    {
                        "question": "Malware is?",
                        "options": [
                            "Hardware",
                            "Bad software",
                            "Network",
                            "User"
                        ],
                        "correct": 1,
                        "explanation": "Malicious software."
                    },
                    {
                        "question": "Git is for?",
                        "options": [
                            "Version control",
                            "Chat",
                            "Drawing",
                            "Music"
                        ],
                        "correct": 0,
                        "explanation": "Version control system."
                    }
                ],
                "engineering": [
                    {
                        "question": "Thermodynamics 1st law?",
                        "options": [
                            "Entropy",
                            "Energy conservation",
                            "Absolute zero",
                            "Gravity"
                        ],
                        "correct": 1,
                        "explanation": "Energy cannot be created or destroyed."
                    },
                    {
                        "question": "Stress vs Strain?",
                        "options": [
                            "Same",
                            "Force vs Deformation",
                            "Heat vs Cold",
                            "Speed vs Time"
                        ],
                        "correct": 1,
                        "explanation": "Stress is force/area, Strain is deformation."
                    },
                    {
                        "question": "AC vs DC?",
                        "options": [
                            "Air/Direct",
                            "Alternating/Direct Current",
                            "Amp/Degree",
                            "After/During"
                        ],
                        "correct": 1,
                        "explanation": "Alternating Current vs Direct Current."
                    },
                    {
                        "question": "Turbine function?",
                        "options": [
                            "Burn fuel",
                            "Extract energy from fluid",
                            "Pump water",
                            "Heat air"
                        ],
                        "correct": 1,
                        "explanation": "Converts fluid energy to mechanical energy."
                    },
                    {
                        "question": "Alloy example?",
                        "options": [
                            "Gold",
                            "Iron",
                            "Steel",
                            "Oxygen"
                        ],
                        "correct": 2,
                        "explanation": "Steel is an alloy of iron and carbon."
                    },
                    {
                        "question": "Bernoulli's principle?",
                        "options": [
                            "Fluid speed/pressure",
                            "Gravity",
                            "Heat",
                            "Light"
                        ],
                        "correct": 0,
                        "explanation": "Faster fluid means lower pressure."
                    }
                ]
            },
            "11": {
                "science": [
                    {
                        "question": "Cellular respiration product?",
                        "options": [
                            "O2",
                            "ATP",
                            "Glucose",
                            "Light"
                        ],
                        "correct": 1,
                        "explanation": "Produces ATP energy."
                    },
                    {
                        "question": "Quantum mechanics deals with?",
                        "options": [
                            "Planets",
                            "Subatomic particles",
                            "Animals",
                            "Rocks"
                        ],
                        "correct": 1,
                        "explanation": "Physics of very small particles."
                    },
                    {
                        "question": "Avogadro's number?",
                        "options": [
                            "6.02x10^23",
                            "3.14",
                            "9.8",
                            "100"
                        ],
                        "correct": 0,
                        "explanation": "Particles in a mole."
                    },
                    {
                        "question": "Electronegativity?",
                        "options": [
                            "Attract electrons",
                            "Repel protons",
                            "Conductivity",
                            "Mass"
                        ],
                        "correct": 0,
                        "explanation": "Tendency to attract shared electrons."
                    },
                    {
                        "question": "Vector quantity?",
                        "options": [
                            "Mass",
                            "Speed",
                            "Velocity",
                            "Temperature"
                        ],
                        "correct": 2,
                        "explanation": "Velocity has magnitude and direction."
                    },
                    {
                        "question": "Enzyme function?",
                        "options": [
                            "Slow reaction",
                            "Catalyst",
                            "Fuel",
                            "Structure"
                        ],
                        "correct": 1,
                        "explanation": "Biological catalyst speeds up reactions."
                    }
                ],
                "mathematics": [
                    {
                        "question": "Integral of 2x?",
                        "options": [
                            "2",
                            "x^2",
                            "2x^2",
                            "x"
                        ],
                        "correct": 1,
                        "explanation": "x^2 + C."
                    },
                    {
                        "question": "i squared?",
                        "options": [
                            "1",
                            "-1",
                            "0",
                            "i"
                        ],
                        "correct": 1,
                        "explanation": "i is sqrt(-1), so i^2 = -1."
                    },
                    {
                        "question": "Unit circle radius?",
                        "options": [
                            "1",
                            "2",
                            "pi",
                            "0"
                        ],
                        "correct": 0,
                        "explanation": "Radius is 1."
                    },
                    {
                        "question": "Matrix determinant ad-bc?",
                        "options": [
                            "2x2",
                            "3x3",
                            "1x1",
                            "4x4"
                        ],
                        "correct": 0,
                        "explanation": "For a 2x2 matrix."
                    },
                    {
                        "question": "Limit 1/x as x->infinity?",
                        "options": [
                            "1",
                            "0",
                            "Infinity",
                            "Undefined"
                        ],
                        "correct": 1,
                        "explanation": "Approaches 0."
                    },
                    {
                        "question": "Permutation vs Combination?",
                        "options": [
                            "Order matters",
                            "Same",
                            "Grouping",
                            "Adding"
                        ],
                        "correct": 0,
                        "explanation": "Order matters in permutations."
                    }
                ],
                "technology": [
                    {
                        "question": "TCP/IP?",
                        "options": [
                            "Communication protocol",
                            "Computer part",
                            "Software",
                            "Company"
                        ],
                        "correct": 0,
                        "explanation": "Transmission Control Protocol/Internet Protocol."
                    },
                    {
                        "question": "Machine Learning?",
                        "options": [
                            "Robots walking",
                            "Systems learning from data",
                            "Manufacturing",
                            "Typing"
                        ],
                        "correct": 1,
                        "explanation": "Algorithms that improve through experience."
                    },
                    {
                        "question": "Big O notation?",
                        "options": [
                            "Size",
                            "Algorithm complexity",
                            "Disk space",
                            "Screen res"
                        ],
                        "correct": 1,
                        "explanation": "Describes performance/complexity."
                    },
                    {
                        "question": "Virtual Machine?",
                        "options": [
                            "Fake computer",
                            "Emulated system",
                            "Game",
                            "Dream"
                        ],
                        "correct": 1,
                        "explanation": "Software emulation of a computer system."
                    },
                    {
                        "question": "Blockchain?",
                        "options": [
                            "Cube",
                            "Decentralized ledger",
                            "Toy",
                            "Wall"
                        ],
                        "correct": 1,
                        "explanation": "Distributed database maintaining a list of records."
                    },
                    {
                        "question": "Compiler?",
                        "options": [
                            "Editor",
                            "Translator code->machine",
                            "Player",
                            "Organizer"
                        ],
                        "correct": 1,
                        "explanation": "Translates source code to machine code."
                    }
                ],
                "engineering": [
                    {
                        "question": "Moment of inertia?",
                        "options": [
                            "Time",
                            "Resistance to rotation",
                            "Speed",
                            "Weight"
                        ],
                        "correct": 1,
                        "explanation": "Rotational analog of mass."
                    },
                    {
                        "question": "Op-Amp?",
                        "options": [
                            "Operational Amplifier",
                            "Open Amp",
                            "Optical Amp",
                            "Option Amp"
                        ],
                        "correct": 0,
                        "explanation": "High-gain electronic voltage amplifier."
                    },
                    {
                        "question": "Carnot efficiency?",
                        "options": [
                            "Max theoretical",
                            "Min",
                            "Average",
                            "Zero"
                        ],
                        "correct": 0,
                        "explanation": "Maximum theoretical efficiency of heat engine."
                    },
                    {
                        "question": "Young's Modulus?",
                        "options": [
                            "Age",
                            "Stiffness",
                            "Weight",
                            "Color"
                        ],
                        "correct": 1,
                        "explanation": "Measure of stiffness of a solid material."
                    },
                    {
                        "question": "PID Controller?",
                        "options": [
                            "Proportional Integral Derivative",
                            "Personal ID",
                            "Process In Data",
                            "Power In Device"
                        ],
                        "correct": 0,
                        "explanation": "Control loop feedback mechanism."
                    },
                    {
                        "question": "Fluid dynamics viscosity?",
                        "options": [
                            "Thickness/Resistance",
                            "Color",
                            "Taste",
                            "Volume"
                        ],
                        "correct": 0,
                        "explanation": "Resistance to flow."
                    }
                ]
            },
            "12": {
                "science": [
                    {
                        "question": "Gibbs free energy equation?",
                        "options": [
                            "G=H-TS",
                            "E=mc2",
                            "F=ma",
                            "PV=nRT"
                        ],
                        "correct": 0,
                        "explanation": "Delta G = Delta H - T Delta S."
                    },
                    {
                        "question": "Heisenberg Uncertainty?",
                        "options": [
                            "Position/Momentum",
                            "Time/Space",
                            "Mass/Energy",
                            "Speed/Force"
                        ],
                        "correct": 0,
                        "explanation": "Cannot know position and momentum simultaneously."
                    },
                    {
                        "question": "Protein synthesis step 1?",
                        "options": [
                            "Translation",
                            "Transcription",
                            "Replication",
                            "Mitosis"
                        ],
                        "correct": 1,
                        "explanation": "Transcription of DNA to mRNA."
                    },
                    {
                        "question": "Entropy is measure of?",
                        "options": [
                            "Heat",
                            "Disorder",
                            "Energy",
                            "Work"
                        ],
                        "correct": 1,
                        "explanation": "Measure of disorder or randomness."
                    },
                    {
                        "question": "Special Relativity?",
                        "options": [
                            "Gravity",
                            "Time dilation/Length contraction",
                            "Magnets",
                            "Chemicals"
                        ],
                        "correct": 1,
                        "explanation": "Physics at high speeds."
                    },
                    {
                        "question": "Standard Model?",
                        "options": [
                            "Cars",
                            "Particle physics",
                            "Building",
                            "Fashion"
                        ],
                        "correct": 1,
                        "explanation": "Theory classifying subatomic particles."
                    }
                ],
                "mathematics": [
                    {
                        "question": "Laplace transform of 1?",
                        "options": [
                            "s",
                            "1/s",
                            "e^s",
                            "0"
                        ],
                        "correct": 1,
                        "explanation": "1/s."
                    },
                    {
                        "question": "Eigenvalue equation?",
                        "options": [
                            "Ax=lx",
                            "Ax=b",
                            "y=mx+b",
                            "a^2+b^2"
                        ],
                        "correct": 0,
                        "explanation": "A vector x is an eigenvector if Ax is a scalar multiple of x."
                    },
                    {
                        "question": "Taylor series for e^x?",
                        "options": [
                            "1+x+x^2/2!...",
                            "x-x^3/3!...",
                            "1-x...",
                            "x"
                        ],
                        "correct": 0,
                        "explanation": "Sum of x^n/n!."
                    },
                    {
                        "question": "Partial derivative?",
                        "options": [
                            "Part of whole",
                            "Derivative wrt one variable",
                            "Half derivative",
                            "Wrong"
                        ],
                        "correct": 1,
                        "explanation": "Derivative with respect to one variable holding others constant."
                    },
                    {
                        "question": "Complex conjugate of a+bi?",
                        "options": [
                            "a-bi",
                            "-a-bi",
                            "b+ai",
                            "a+bi"
                        ],
                        "correct": 0,
                        "explanation": "Change sign of imaginary part."
                    },
                    {
                        "question": "Differential equation order?",
                        "options": [
                            "Highest derivative",
                            "Number of terms",
                            "Degree",
                            "Variables"
                        ],
                        "correct": 0,
                        "explanation": "Order of the highest derivative present."
                    }
                ],
                "technology": [
                    {
                        "question": "Halting Problem?",
                        "options": [
                            "Computer stop",
                            "Undecidable",
                            "Easy",
                            "Hardware"
                        ],
                        "correct": 1,
                        "explanation": "Proven undecidable by Turing."
                    },
                    {
                        "question": "CAP Theorem?",
                        "options": [
                            "Hat",
                            "Consistency, Availability, Partition",
                            "Computer App Program",
                            "Control All Parts"
                        ],
                        "correct": 1,
                        "explanation": "Distributed systems trade-offs."
                    },
                    {
                        "question": "Quantum Computing unit?",
                        "options": [
                            "Bit",
                            "Qubit",
                            "Byte",
                            "Pixel"
                        ],
                        "correct": 1,
                        "explanation": "Quantum bit."
                    },
                    {
                        "question": "Neural Network layers?",
                        "options": [
                            "Input, Hidden, Output",
                            "Top, Bottom",
                            "Left, Right",
                            "One"
                        ],
                        "correct": 0,
                        "explanation": "Structure of deep learning models."
                    },
                    {
                        "question": "Docker?",
                        "options": [
                            "Pants",
                            "Containerization",
                            "Ship",
                            "Doctor"
                        ],
                        "correct": 1,
                        "explanation": "Platform for OS-level virtualization."
                    },
                    {
                        "question": "RESTful API constraint?",
                        "options": [
                            "Stateless",
                            "Stateful",
                            "Fast",
                            "Slow"
                        ],
                        "correct": 0,
                        "explanation": "Server does not store client context."
                    }
                ],
                "engineering": [
                    {
                        "question": "Reynolds number?",
                        "options": [
                            "Laminar vs Turbulent",
                            "Speed",
                            "Heat",
                            "Stress"
                        ],
                        "correct": 0,
                        "explanation": "Predicts flow patterns."
                    },
                    {
                        "question": "Fourier Transform?",
                        "options": [
                            "Time to Frequency domain",
                            "Heat",
                            "Stress",
                            "Motion"
                        ],
                        "correct": 0,
                        "explanation": "Decomposes function into frequencies."
                    },
                    {
                        "question": "FEA?",
                        "options": [
                            "Finite Element Analysis",
                            "Fast Eng App",
                            "Force Energy Area",
                            "Fluid Eq"
                        ],
                        "correct": 0,
                        "explanation": "Simulation of physical phenomenon."
                    },
                    {
                        "question": "Control System Stability?",
                        "options": [
                            "Poles in LHP",
                            "RHP",
                            "Zero",
                            "Infinite"
                        ],
                        "correct": 0,
                        "explanation": "Poles must be in Left Half Plane."
                    },
                    {
                        "question": "Maxwell's Equations?",
                        "options": [
                            "Electromagnetism",
                            "Gravity",
                            "Fluid",
                            "Heat"
                        ],
                        "correct": 0,
                        "explanation": "Set of equations describing electromagnetism."
                    },
                    {
                        "question": "Strain Gauge?",
                        "options": [
                            "Measures deformation",
                            "Temperature",
                            "Pressure",
                            "Light"
                        ],
                        "correct": 0,
                        "explanation": "Sensor to measure strain."
                    }
                ]
            }
        };

        // Merge into stemQuestions
        Object.assign(stemQuestions, additionalContent);
        console.log("Grades 7-12 content loaded successfully");
    </script>
    <!-- Interactive Framework Scripts -->
    <script src="canvas-utils.js"></script>
    <script src="interactive-framework.js"></script>
    <script src="interactives/graph-plotter.js"></script>
    <script src="interactives/cell-explorer.js"></script>
    <script src="interactives/circuit-simulator.js"></script>

    <script src="translations.js"></script>
    <script src="home-translations.js"></script>

    <!-- YouTube Videos Modal -->
    <div class="modal fade" id="youtubeModal" tabindex="-1" aria-labelledby="youtubeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="youtubeModalLabel">üì∫ Educational Videos</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="youtube-videos-content"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Educational YouTube Videos Data - Grade-Specific Content
        const gradeSpecificVideos = {
            6: {
                science: [
                    { title: "What is Science? - For Kids", id: "QVq5htPY_BA", description: "Introduction to science" },
                    { title: "The Water Cycle", id: "al-do-HGuIk", description: "Learn about water cycle" },
                    { title: "States of Matter", id: "cQjNj_z8xiw", description: "Solid, liquid, and gas" },
                    { title: "Plant Parts", id: "X6TLFZUC9gI", description: "Learn about plants" }
                ],
                mathematics: [
                    { title: "Fractions Introduction", id: "M44FkZDoclU", description: "Understanding fractions" },
                    { title: "Decimals Basics", id: "9frz4ODJUc0", description: "Learn about decimals" },
                    { title: "Geometry for Kids", id: "DUGkQMLowXA", description: "Basic shapes" },
                    { title: "Introduction to Ratios", id: "xA435umOQuw", description: "Understanding ratios" }
                ],
                technology: [
                    { title: "What is a Computer?", id: "Cu3R5it4cQs", description: "Computer basics" },
                    { title: "Internet Safety", id: "aO858HyFbKI", description: "Stay safe online" },
                    { title: "Coding for Kids", id: "Ok6LbV6bqaE", description: "Intro to coding" },
                    { title: "How Apps Work", id: "3gMOYZoMtEs", description: "Understanding apps" }
                ],
                engineering: [
                    { title: "What is Engineering?", id: "bipTWWHya8A", description: "Engineering basics" },
                    { title: "Simple Machines", id: "jAPxALm9fZA", description: "Levers and pulleys" },
                    { title: "Building Bridges", id: "oVOnRPefcno", description: "How bridges work" },
                    { title: "Famous Inventions", id: "5zo-ca2DGDs", description: "Cool inventions" }
                ]
            },
            7: {
                science: [
                    { title: "Cell Structure", id: "URUJD5NEXC8", description: "Introduction to cells" },
                    { title: "Chemical Reactions", id: "Lvbm8horG1U", description: "Understanding reactions" },
                    { title: "Forces and Motion", id: "hWg6QPutUas", description: "Newton's laws" },
                    { title: "The Solar System", id: "libKVRa01L8", description: "Planets and space" }
                ],
                mathematics: [
                    { title: "Integers", id: "AF31lWJJSgg", description: "Working with integers" },
                    { title: "Algebraic Expressions", id: "xFP41SGNaXA", description: "Intro to algebra" },
                    { title: "Percentages", id: "7pDi3_TBCKA", description: "Understanding percentages" },
                    { title: "Area and Perimeter", id: "82PYTmwa5sg", description: "Calculating area" }
                ],
                technology: [
                    { title: "HTML Basics", id: "mU6anWqZJcc", description: "Building web pages" },
                    { title: "Digital Citizenship", id: "toK_BAYnjoU", description: "Being responsible online" },
                    { title: "Scratch Programming", id: "m2Ux2PnJe6E", description: "Visual programming" },
                    { title: "Binary Numbers", id: "LpuPe81bc2w", description: "How computers count" }
                ],
                engineering: [
                    { title: "Engineering Fields", id: "pQgxiQAMTTo", description: "Types of engineering" },
                    { title: "Structural Engineering", id: "oqpp8L4J4ek", description: "Building structures" },
                    { title: "Robot Design", id: "NRj6gzah7JA", description: "Intro to robotics" },
                    { title: "Environmental Engineering", id: "uHUO6PrsOzg", description: "Protecting Earth" }
                ]
            },
            8: {
                science: [
                    { title: "Chemistry Intro", id: "t8x3wdXZGEY", description: "Chemical principles" },
                    { title: "Photosynthesis", id: "CL9A8YhwUps", description: "How plants make food" },
                    { title: "Energy and Work", id: "zaceSCDATjg", description: "Physics of energy" },
                    { title: "Ecosystems", id: "KQF9WdZrH_c", description: "Understanding ecosystems" }
                ],
                mathematics: [
                    { title: "Linear Equations", id: "Ft2_QtXAnh8", description: "Solving equations" },
                    { title: "Pythagorean Theorem", id: "d8EA5TxGzcY", description: "Right triangles" },
                    { title: "Functions", id: "7JZ0IfCQ488", description: "Intro to functions" },
                    { title: "Probability", id: "uzkc-qNVoOk", description: "Chance and likelihood" }
                ],
                technology: [
                    { title: "JavaScript Basics", id: "W6NZfCO5SIk", description: "Programming fundamentals" },
                    { title: "How Computers Work", id: "tpIctyqH29Q", description: "CS basics" },
                    { title: "Databases", id: "FR4QIeZaPeM", description: "Storing data" },
                    { title: "Cybersecurity", id: "sdpxddDzXfE", description: "Staying secure" }
                ],
                engineering: [
                    { title: "Mechanical Engineering", id: "csqee7qLobk", description: "Machines" },
                    { title: "Electrical Circuits", id: "YX7J7ppcma0", description: "Understanding electricity" },
                    { title: "3D Printing", id: "Vx0Z6LplaMU", description: "CAD and manufacturing" },
                    { title: "Renewable Energy", id: "1kUE0BZtTRc", description: "Clean energy" }
                ]
            },
            9: {
                science: [
                    { title: "Atomic Structure", id: "1xSQlwWGT8M", description: "Inside the atom" },
                    { title: "DNA and Genetics", id: "zwibgNGe4aY", description: "Heredity" },
                    { title: "Newton's Laws", id: "kKKM8Y-u7ds", description: "Classical mechanics" },
                    { title: "Climate Science", id: "EtW2rrLHs08", description: "Climate change" }
                ],
                mathematics: [
                    { title: "Quadratic Equations", id: "i7idZfS8t8w", description: "Solving quadratics" },
                    { title: "Trigonometry", id: "yBw67Fb31Cs", description: "Sin, cos, tan" },
                    { title: "Systems of Equations", id: "oKqtgz2eo-Y", description: "Multiple equations" },
                    { title: "Polynomials", id: "nPPNgin7W7Y", description: "Polynomial functions" }
                ],
                technology: [
                    { title: "Python Programming", id: "kqtD5dpn9C8", description: "Learn Python" },
                    { title: "Algorithms", id: "6hfOvs8pY1k", description: "Problem solving" },
                    { title: "Web Development", id: "pEfrdAtAmqk", description: "Building websites" },
                    { title: "Cloud Computing", id: "M988_fsOSWo", description: "The cloud" }
                ],
                engineering: [
                    { title: "Aerospace Engineering", id: "UvtYn2j78gw", description: "Flight and space" },
                    { title: "Thermodynamics", id: "NyOYW07-L5g", description: "Heat and energy" },
                    { title: "Materials Science", id: "NOK1nMiiTWU", description: "Material properties" },
                    { title: "Automation", id: "UR0hOmjaHp0", description: "Control systems" }
                ]
            },
            10: {
                science: [
                    { title: "Chemical Bonding", id: "5gEWOh630b8", description: "Ionic and covalent" },
                    { title: "Evolution", id: "GcjgWov7mTM", description: "Natural selection" },
                    { title: "Electromagnetic Waves", id: "cfXzwh3KadE", description: "Light and radiation" },
                    { title: "Plate Tectonics", id: "zbtAXW-2nz0", description: "Moving continents" }
                ],
                mathematics: [
                    { title: "Calculus Introduction", id: "WUvTyaaNkzM", description: "Limits and derivatives" },
                    { title: "Logarithms", id: "-Rvg7Gin80E", description: "Understanding logs" },
                    { title: "Vectors", id: "fNk_zzaMoSs", description: "Vector math" },
                    { title: "Statistics", id: "xxpc-HPKN28", description: "Data analysis" }
                ],
                technology: [
                    { title: "Data Structures", id: "RBSGKlAvoiM", description: "Organizing data" },
                    { title: "OOP", id: "pTB0EiLXUC8", description: "Object-oriented programming" },
                    { title: "SQL Databases", id: "ztHopE5Wnpc", description: "Database design" },
                    { title: "Networks", id: "cNwEVYkx2Kk", description: "How networks work" }
                ],
                engineering: [
                    { title: "Fluid Mechanics", id: "qysJsCGD_M0", description: "Flow and pressure" },
                    { title: "Semiconductor Physics", id: "33vbFFFn04k", description: "Electronics" },
                    { title: "Design Process", id: "W-eqjMc1Efs", description: "Engineering design" },
                    { title: "Sustainable Engineering", id: "XpBmePf1xkU", description: "Green engineering" }
                ]
            },
            11: {
                science: [
                    { title: "Organic Chemistry", id: "soIba7r34ZM", description: "Carbon compounds" },
                    { title: "Quantum Mechanics", id: "7kb1VT0J3DE", description: "Quantum physics" },
                    { title: "Molecular Biology", id: "D3fOXt4MrOM", description: "DNA and proteins" },
                    { title: "Thermochemistry", id: "NzB2YwNndZw", description: "Energy in reactions" }
                ],
                mathematics: [
                    { title: "Derivatives & Integrals", id: "WsQQvHm4lSw", description: "Calculus" },
                    { title: "Matrices", id: "0oGJTQCy4cQ", description: "Matrix operations" },
                    { title: "Complex Numbers", id: "T647CGsuOVU", description: "Imaginary numbers" },
                    { title: "Differential Equations", id: "6o7b9yyhH7k", description: "Rate of change" }
                ],
                technology: [
                    { title: "Machine Learning", id: "ukzFI9rgwfU", description: "AI fundamentals" },
                    { title: "Software Engineering", id: "O753uuutqH8", description: "Building software" },
                    { title: "Computer Architecture", id: "zLP_X4wyHbY", description: "How CPUs work" },
                    { title: "Mobile Apps", id: "fis26HvvDII", description: "App development" }
                ],
                engineering: [
                    { title: "Advanced Mechanics", id: "5S0qkTMCsw8", description: "Statics and dynamics" },
                    { title: "Signal Processing", id: "spUNpyF58BY", description: "Signals" },
                    { title: "Nanotechnology", id: "DAOFpgocfrg", description: "Nanoscale engineering" },
                    { title: "Biomedical Engineering", id: "KQm-gfobUm8", description: "Medicine + engineering" }
                ]
            },
            12: {
                science: [
                    { title: "Advanced Quantum Physics", id: "Usu9xZfabPM", description: "Wave-particle duality" },
                    { title: "Biochemistry", id: "CHJsaq2lNjU", description: "Chemistry of life" },
                    { title: "Astrophysics", id: "TCrRs_OBN0E", description: "Stars and galaxies" },
                    { title: "Environmental Science", id: "kB0JA7jsqMw", description: "Global systems" }
                ],
                mathematics: [
                    { title: "Multivariable Calculus", id: "TrcCbdWwCBc", description: "3D calculus" },
                    { title: "Linear Algebra", id: "kjBOesZCoqc", description: "Vectors and spaces" },
                    { title: "Probability Theory", id: "3v9w79NhsfI", description: "Advanced probability" },
                    { title: "Number Theory", id: "vVD42dGwGwc", description: "Properties of numbers" }
                ],
                technology: [
                    { title: "Artificial Intelligence", id: "kWmX3pd1f10", description: "Deep learning" },
                    { title: "Blockchain", id: "SSo_EIwHSd4", description: "Distributed systems" },
                    { title: "Quantum Computing", id: "JhHMJCUmq28", description: "Future of computing" },
                    { title: "Advanced Algorithms", id: "6hfOvs8pY1k", description: "Complex algorithms" }
                ],
                engineering: [
                    { title: "Engineering Physics", id: "NHRoJdRKR0g", description: "Applied physics" },
                    { title: "Control Systems", id: "UR0hOmjaHp0", description: "Feedback and stability" },
                    { title: "Advanced Robotics", id: "VM2AUU9jmNg", description: "Autonomous systems" },
                    { title: "Energy Systems", id: "1kUE0BZtTRc", description: "Power generation" }
                ]
            }
        };

        // Handle Watch Videos button clicks
        document.addEventListener('DOMContentLoaded', function () {
            const videoButtons = document.querySelectorAll('.video-btn');

            videoButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    const subject = this.getAttribute('data-subject');
                    const gradeElement = document.getElementById('selected-grade');
                    const currentGrade = gradeElement ? parseInt(gradeElement.textContent) : 6;
                    showYouTubeVideos(subject, currentGrade);
                });
            });
        });

        function showYouTubeVideos(subject, grade) {
            const modal = new bootstrap.Modal(document.getElementById('youtubeModal'));
            const content = document.getElementById('youtube-videos-content');

            // Get videos for the specific grade and subject
            const videos = (gradeSpecificVideos[grade] && gradeSpecificVideos[grade][subject]) || [];

            const subjectTitles = {
                science: 'üî¨ Science',
                mathematics: 'üî¢ Mathematics',
                technology: '‚öôÔ∏è Technology',
                engineering: 'üèóÔ∏è Engineering'
            };

            let html = `
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="mb-0">Grade ${grade} - ${subjectTitles[subject]} Videos</h4>
            <span class="badge bg-primary">${videos.length} videos</span>
        </div>
        <div class="row g-4">
    `;

            videos.forEach(video => {
                html += `
            <div class="col-md-6">
                <div class="card h-100 shadow-sm">
                    <div class="ratio ratio-16x9">
                        <iframe 
                            src="https://www.youtube.com/embed/${video.id}" 
                            title="${video.title}"
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">${video.title}</h5>
                        <p class="card-text text-muted">${video.description}</p>
                    </div>
                </div>
            </div>
        `;
            });

            html += `
        </div>
        <div class="alert alert-info mt-4" role="alert">
            <strong>üí° Tip:</strong> These videos are curated for Grade ${grade} students. Watch them to supplement your learning!
        </div>
    `;

            content.innerHTML = html;
            modal.show();
        }
    </script>

    <script>
        // Hide Teacher link for students
        fetch('/api/user-info')
            .then(res => res.json())
            .then(user => {
                if (user.type === 'student') {
                    const teacherLink = document.getElementById('teacher-nav-item');
                    if (teacherLink) {
                        teacherLink.style.display = 'none';
                    }
                }
            })
            .catch(err => console.log('Not logged in'));
    </script>
    <script src="offline-manager.js"></script>

</body>

</html>